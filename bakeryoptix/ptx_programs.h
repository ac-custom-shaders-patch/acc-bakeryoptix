#pragma once
#include <string>

inline std::string ptx_program_rayanyhit_proctree(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 4 .b8 varGeoNormal[12];\n.global .align 4 .b8 varNormal";
  s += "[12];\n.global .align 4 .b8 varTexCoord[12];\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;\n";
  s += ".global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_re";
  s += "gister24reg_exception_64_detail1E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.globa";
  s += "l .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_register";
  s += "24reg_exception_64_detail4E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .ali";
  s += "gn 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_";
  s += "exception_64_detail7E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8 .";
  s += "u64 _ZN21rti_internal_register24reg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_except";
  s += "ion_detail0E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21rti";
  s += "_internal_register21reg_exception_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;\n";
  s += ".global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_regis";
  s += "ter21reg_exception_detail5E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .align ";
  s += "4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_except";
  s += "ion_detail8E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21rti";
  s += "_internal_register14reg_rayIndex_xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .align";
  s += " 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12varGeoNormalE[8] ";
  s += "= {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo9varNormalE[8] = {82, 97, 121, 0, 12, 0";
  s += ", 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo11varTexCoordE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .al";
  s += "ign 1 .b8 _ZN21rti_internal_typename12varGeoNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, ";
  s += "0};\n.global .align 1 .b8 _ZN21rti_internal_typename9varNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 9";
  s += "7, 116, 51, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename11varTexCoordE[14] = {111, 112, 116, 105, 120, 58, 58, 1";
  s += "02, 108, 111, 97, 116, 51, 0};\n.global .align 4 .u32 _ZN21rti_internal_typeenum12varGeoNormalE = 4919;\n.global .align ";
  s += "4 .u32 _ZN21rti_internal_typeenum9varNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum11varTexCoordE = 4";
  s += "919;\n.global .align 1 .b8 _ZN21rti_internal_semantic12varGeoNormalE[21] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 3";
  s += "2, 71, 69, 79, 95, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic9varNormalE[17] = {97, 11";
  s += "6, 116, 114, 105, 98, 117, 116, 101, 32, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic11v";
  s += "arTexCoordE[19] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 84, 69, 88, 67, 79, 79, 82, 68, 0};\n.global .align 1 ";
  s += ".b8 _ZN23rti_internal_annotation12varGeoNormalE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation9varNormalE[1];\n.";
  s += "global .align 1 .b8 _ZN23rti_internal_annotation11varTexCoordE[1];\n\n.visible .entry _Z18rayanyhit_proctreev(\n\n)\n{\n";
  s += " .reg .pred %p<2>;\n .reg .f32 %f<6>;\n .reg .f64 %fd<6>;\n .reg .b64 %rd<3>;\n\n\n mov.u64 %rd1, varTexCoord;\n ldu.glo";
  s += "bal.f32 %f1, [varTexCoord];\n cvt.f64.f32 %fd1, %f1;\n add.s64 %rd2, %rd1, 4;\n ldu.global.f32 %f2, [%rd2];\n cvt.f64.f3";
  s += "2 %fd2, %f2;\n mul.f64 %fd3, %fd2, 0d406ED0D9E83E425B;\n fma.rn.f64 %fd4, %fd1, 0d4085CBAA30553261, %fd3;\n cvt.rn.f32.f";
  s += "64 %f3, %fd4;\n cvt.rmi.f32.f32 %f4, %f3;\n sub.f32 %f5, %f3, %f4;\n cvt.f64.f32 %fd5, %f5;\n setp.geu.f64 %p1, %fd5, 0d";
  s += "3FD3333333333333;\n @%p1 bra BB0_2;\n\n call _rt_ignore_intersection, ();\n \nBB0_2:\n ret;\n}";
  return s;
}

inline std::string ptx_program_rayanyhit_tree(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 4 .b8 varGeoNormal[12];\n.global .align 4 .b8 varNormal";
  s += "[12];\n.global .align 4 .b8 varTexCoord[12];\n.global .align 4 .f32 parMaterialAlphaRef;\n.global .align 4 .f32 parMater";
  s += "ialPassChange;\n.global .texref parMaterialTexture;\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detec";
  s += "torE;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_inte";
  s += "rnal_register24reg_exception_64_detail1E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;";
  s += "\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_";
  s += "register24reg_exception_64_detail4E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.glo";
  s += "bal .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_regist";
  s += "er24reg_exception_64_detail7E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .a";
  s += "lign 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21re";
  s += "g_exception_detail0E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 ";
  s += "_ZN21rti_internal_register21reg_exception_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_det";
  s += "ail3E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_intern";
  s += "al_register21reg_exception_detail5E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global";
  s += " .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21re";
  s += "g_exception_detail8E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 ";
  s += "_ZN21rti_internal_register14reg_rayIndex_xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.globa";
  s += "l .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12varGeoNor";
  s += "malE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo9varNormalE[8] = {82, 97, 121, ";
  s += "0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo11varTexCoordE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.gl";
  s += "obal .align 4 .b8 _ZN21rti_internal_typeinfo19parMaterialAlphaRefE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 ";
  s += ".b8 _ZN21rti_internal_typeinfo21parMaterialPassChangeE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 1 .b8 _ZN21rti";
  s += "_internal_typename12varGeoNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .alig";
  s += "n 1 .b8 _ZN21rti_internal_typename9varNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.";
  s += "global .align 1 .b8 _ZN21rti_internal_typename11varTexCoordE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, ";
  s += "116, 51, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename19parMaterialAlphaRefE[6] = {102, 108, 111, 97, 116, 0};\n.";
  s += "global .align 1 .b8 _ZN21rti_internal_typename21parMaterialPassChangeE[6] = {102, 108, 111, 97, 116, 0};\n.global .align";
  s += " 4 .u32 _ZN21rti_internal_typeenum12varGeoNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum9varNormalE =";
  s += " 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum11varTexCoordE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_";
  s += "typeenum19parMaterialAlphaRefE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum21parMaterialPassChangeE = 4919;";
  s += "\n.global .align 1 .b8 _ZN21rti_internal_semantic12varGeoNormalE[21] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 7";
  s += "1, 69, 79, 95, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic9varNormalE[17] = {97, 116, 1";
  s += "16, 114, 105, 98, 117, 116, 101, 32, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic11varTe";
  s += "xCoordE[19] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 84, 69, 88, 67, 79, 79, 82, 68, 0};\n.global .align 1 .b8 ";
  s += "_ZN21rti_internal_semantic19parMaterialAlphaRefE[1];\n.global .align 1 .b8 _ZN21rti_internal_semantic21parMaterialPassCh";
  s += "angeE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation12varGeoNormalE[1];\n.global .align 1 .b8 _ZN23rti_internal_";
  s += "annotation9varNormalE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation11varTexCoordE[1];\n.global .align 1 .b8 _ZN";
  s += "23rti_internal_annotation19parMaterialAlphaRefE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation21parMaterialPassC";
  s += "hangeE[1];\n\n.visible .entry _Z14rayanyhit_treev(\n\n)\n{\n .reg .pred %p<3>;\n .reg .b16 %rs<3>;\n .reg .f32 %f<11>;\n";
  s += " .reg .b32 %r<5>;\n .reg .f64 %fd<5>;\n .reg .b64 %rd<4>;\n\n\n ldu.global.f32 %f1, [varTexCoord];\n mov.u64 %rd2, varTe";
  s += "xCoord;\n add.s64 %rd3, %rd2, 4;\n ldu.global.f32 %f2, [%rd3];\n tex.2d.v4.u32.f32 {%r1, %r2, %r3, %r4}, [parMaterialTex";
  s += "ture, {%f1, %f2}];\n cvt.u16.u32 %rs1, %r4;\n and.b16 %rs2, %rs1, 255;\n cvt.rn.f32.u16 %f3, %rs2;\n ld.global.f32 %f4, ";
  s += "[parMaterialAlphaRef];\n setp.gtu.f32 %p1, %f3, %f4;\n @%p1 bra BB0_3;\n\n ld.global.f32 %f5, [varTexCoord];\n cvt.f64.f";
  s += "32 %fd1, %f5;\n ld.global.f32 %f6, [varTexCoord+4];\n cvt.f64.f32 %fd2, %f6;\n mul.f64 %fd3, %fd2, 0d406ED0D9E83E425B;\n";
  s += " fma.rn.f64 %fd4, %fd1, 0d4085CBAA30553261, %fd3;\n cvt.rn.f32.f64 %f7, %fd4;\n cvt.rmi.f32.f32 %f8, %f7;\n sub.f32 %f9,";
  s += " %f7, %f8;\n ld.global.f32 %f10, [parMaterialPassChange];\n setp.geu.f32 %p2, %f9, %f10;\n @%p2 bra BB0_3;\n\n call _rt_";
  s += "ignore_intersection, ();\n \nBB0_3:\n ret;\n}";
  return s;
}

inline std::string ptx_program_rayanyhit(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 4 .b8 varGeoNormal[12];\n.global .align 4 .b8 varNormal";
  s += "[12];\n.global .align 4 .b8 varTexCoord[12];\n.global .align 4 .f32 parMaterialAlphaRef;\n.global .texref parMaterialTex";
  s += "ture;\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;\n.global .align 8 .u64 _ZN21rti_internal";
  s += "_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail1E;\n.gl";
  s += "obal .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.global .align 8 .u64 _ZN21rti_internal_regis";
  s += "ter24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail4E;\n.global .";
  s += "align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .align 8 .u64 _ZN21rti_internal_register24r";
  s += "eg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail7E;\n.global .align ";
  s += "8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exc";
  s += "eption_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail0E;\n.global .align 4 .u32 _Z";
  s += "N21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detai";
  s += "l2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;\n.global .align 4 .u32 _ZN21rti_internal";
  s += "_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail5E;\n.global .";
  s += "align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_";
  s += "exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail8E;\n.global .align 4 .u32 _Z";
  s += "N21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_xE;\n.";
  s += "global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg";
  s += "_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12varGeoNormalE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.glob";
  s += "al .align 4 .b8 _ZN21rti_internal_typeinfo9varNormalE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti";
  s += "_internal_typeinfo11varTexCoordE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo19p";
  s += "arMaterialAlphaRefE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename12varGeoNormalE[1";
  s += "4] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename9";
  s += "varNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .align 1 .b8 _ZN21rti_intern";
  s += "al_typename11varTexCoordE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .align 1 .b8 ";
  s += "_ZN21rti_internal_typename19parMaterialAlphaRefE[6] = {102, 108, 111, 97, 116, 0};\n.global .align 4 .u32 _ZN21rti_inter";
  s += "nal_typeenum12varGeoNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum9varNormalE = 4919;\n.global .align";
  s += " 4 .u32 _ZN21rti_internal_typeenum11varTexCoordE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum19parMaterialA";
  s += "lphaRefE = 4919;\n.global .align 1 .b8 _ZN21rti_internal_semantic12varGeoNormalE[21] = {97, 116, 116, 114, 105, 98, 117,";
  s += " 116, 101, 32, 71, 69, 79, 95, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic9varNormalE[1";
  s += "7] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal";
  s += "_semantic11varTexCoordE[19] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 84, 69, 88, 67, 79, 79, 82, 68, 0};\n.glob";
  s += "al .align 1 .b8 _ZN21rti_internal_semantic19parMaterialAlphaRefE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation1";
  s += "2varGeoNormalE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation9varNormalE[1];\n.global .align 1 .b8 _ZN23rti_inte";
  s += "rnal_annotation11varTexCoordE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation19parMaterialAlphaRefE[1];\n\n.visib";
  s += "le .entry _Z9rayanyhitv(\n\n)\n{\n .reg .pred %p<2>;\n .reg .b16 %rs<3>;\n .reg .f32 %f<5>;\n .reg .b32 %r<5>;\n .reg .b";
  s += "64 %rd<4>;\n\n\n ldu.global.f32 %f1, [varTexCoord];\n mov.u64 %rd2, varTexCoord;\n add.s64 %rd3, %rd2, 4;\n ldu.global.f";
  s += "32 %f2, [%rd3];\n tex.2d.v4.u32.f32 {%r1, %r2, %r3, %r4}, [parMaterialTexture, {%f1, %f2}];\n cvt.u16.u32 %rs1, %r4;\n a";
  s += "nd.b16 %rs2, %rs1, 255;\n cvt.rn.f32.u16 %f3, %rs2;\n ld.global.f32 %f4, [parMaterialAlphaRef];\n setp.gtu.f32 %p1, %f3,";
  s += " %f4;\n @%p1 bra BB0_2;\n\n call _rt_ignore_intersection, ();\n \nBB0_2:\n ret;\n}";
  return s;
}

inline std::string ptx_program_raybb(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 1 .b8 attributesBuffer[1];\n.global .align 1 .b8 indice";
  s += "sBuffer[1];\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;\n.global .align 8 .u64 _ZN21rti_in";
  s += "ternal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail1E";
  s += ";\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.global .align 8 .u64 _ZN21rti_internal";
  s += "_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail4E;\n.gl";
  s += "obal .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .align 8 .u64 _ZN21rti_internal_regis";
  s += "ter24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail7E;\n.global .";
  s += "align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8 .u64 _ZN21rti_internal_register24r";
  s += "eg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail0E;\n.global .align 4 .";
  s += "u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception";
  s += "_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;\n.global .align 4 .u32 _ZN21rti_in";
  s += "ternal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail5E;\n.gl";
  s += "obal .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .align 4 .u32 _ZN21rti_internal_register";
  s += "21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail8E;\n.global .align 4 .";
  s += "u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_";
  s += "xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .align 4 .u32 _ZN21rti_internal_registe";
  s += "r14reg_rayIndex_zE;\n\n.visible .entry _Z5raybbiPf(\n .param .u32 _Z5raybbiPf_param_0,\n .param .u64 _Z5raybbiPf_param_1";
  s += "\n)\n{\n .reg .pred %p<6>;\n .reg .f32 %f<42>;\n .reg .b32 %r<11>;\n .reg .b64 %rd<30>;\n\n\n ld.param.u64 %rd3, [_Z5ray";
  s += "bbiPf_param_1];\n ld.param.s32 %rd6, [_Z5raybbiPf_param_0];\n mov.u64 %rd28, indicesBuffer;\n cvta.global.u64 %rd5, %rd2";
  s += "8;\n mov.u32 %r7, 1;\n mov.u32 %r2, 12;\n mov.u64 %rd27, 0;\n call (%rd4), _rt_buffer_get_64, (%rd5, %r7, %r2, %rd6, %rd";
  s += "27, %rd27, %rd27);\n ld.u32 %rd12, [%rd4];\n mov.u64 %rd29, attributesBuffer;\n cvta.global.u64 %rd11, %rd29;\n ld.u32 %";
  s += "rd18, [%rd4+4];\n ld.u32 %rd24, [%rd4+8];\n mov.u32 %r8, 24;\n call (%rd10), _rt_buffer_get_64, (%rd11, %r7, %r8, %rd12,";
  s += " %rd27, %rd27, %rd27);\n ld.f32 %f3, [%rd10+8];\n ld.f32 %f2, [%rd10+4];\n ld.f32 %f1, [%rd10];\n call (%rd16), _rt_buff";
  s += "er_get_64, (%rd11, %r7, %r8, %rd18, %rd27, %rd27, %rd27);\n ld.f32 %f6, [%rd16+8];\n ld.f32 %f5, [%rd16+4];\n ld.f32 %f4";
  s += ", [%rd16];\n call (%rd22), _rt_buffer_get_64, (%rd11, %r7, %r8, %rd24, %rd27, %rd27, %rd27);\n sub.f32 %f11, %f4, %f1;\n";
  s += " sub.f32 %f12, %f5, %f2;\n sub.f32 %f13, %f6, %f3;\n ld.f32 %f9, [%rd22+8];\n ld.f32 %f8, [%rd22+4];\n ld.f32 %f7, [%rd2";
  s += "2];\n sub.f32 %f14, %f7, %f1;\n sub.f32 %f15, %f8, %f2;\n sub.f32 %f16, %f9, %f3;\n mul.f32 %f17, %f12, %f16;\n mul.f32 ";
  s += "%f18, %f13, %f15;\n sub.f32 %f19, %f17, %f18;\n mul.f32 %f20, %f13, %f14;\n mul.f32 %f21, %f11, %f16;\n sub.f32 %f22, %f";
  s += "20, %f21;\n mul.f32 %f23, %f11, %f15;\n mul.f32 %f24, %f12, %f14;\n sub.f32 %f25, %f23, %f24;\n mul.f32 %f26, %f22, %f22";
  s += ";\n fma.rn.f32 %f27, %f19, %f19, %f26;\n fma.rn.f32 %f28, %f25, %f25, %f27;\n sqrt.rn.f32 %f10, %f28;\n mov.pred %p5, 0;";
  s += "\n setp.leu.f32 %p4, %f10, 0f00000000;\n @%p4 bra BB0_2;\n\n abs.f32 %f29, %f10;\n setp.neu.f32 %p5, %f29, 0f7F800000;\n";
  s += "\nBB0_2:\n cvta.to.global.u64 %rd2, %rd3;\n @%p5 bra BB0_4;\n bra.uni BB0_3;\n\nBB0_4:\n min.f32 %f30, %f1, %f4;\n min.f";
  s += "32 %f31, %f30, %f7;\n min.f32 %f32, %f2, %f5;\n min.f32 %f33, %f32, %f8;\n min.f32 %f34, %f3, %f6;\n min.f32 %f35, %f34,";
  s += " %f9;\n st.global.f32 [%rd2], %f31;\n st.global.f32 [%rd2+4], %f33;\n st.global.f32 [%rd2+8], %f35;\n max.f32 %f36, %f1,";
  s += " %f4;\n max.f32 %f37, %f36, %f7;\n max.f32 %f38, %f2, %f5;\n max.f32 %f39, %f38, %f8;\n max.f32 %f40, %f3, %f6;\n max.f3";
  s += "2 %f41, %f40, %f9;\n st.global.f32 [%rd2+12], %f37;\n st.global.f32 [%rd2+16], %f39;\n st.global.f32 [%rd2+20], %f41;\n ";
  s += "bra.uni BB0_5;\n\nBB0_3:\n mov.u32 %r9, 2096152002;\n st.global.u32 [%rd2+8], %r9;\n st.global.u32 [%rd2+4], %r9;\n st.g";
  s += "lobal.u32 [%rd2], %r9;\n mov.u32 %r10, -51331646;\n st.global.u32 [%rd2+20], %r10;\n st.global.u32 [%rd2+16], %r10;\n st";
  s += ".global.u32 [%rd2+12], %r10;\n\nBB0_5:\n ret;\n}";
  return s;
}

inline std::string ptx_program_rayexception(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 1 .b8 sysOutputBuffer[1];\n.global .align 8 .b8 theLaun";
  s += "chIndex[8];\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;\n.global .align 8 .u64 _ZN21rti_in";
  s += "ternal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail1E";
  s += ";\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.global .align 8 .u64 _ZN21rti_internal";
  s += "_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail4E;\n.gl";
  s += "obal .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .align 8 .u64 _ZN21rti_internal_regis";
  s += "ter24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail7E;\n.global .";
  s += "align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8 .u64 _ZN21rti_internal_register24r";
  s += "eg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail0E;\n.global .align 4 .";
  s += "u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception";
  s += "_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;\n.global .align 4 .u32 _ZN21rti_in";
  s += "ternal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail5E;\n.gl";
  s += "obal .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .align 4 .u32 _ZN21rti_internal_register";
  s += "21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail8E;\n.global .align 4 .";
  s += "u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_";
  s += "xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .align 4 .u32 _ZN21rti_internal_registe";
  s += "r14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo14theLaunchIndexE[8] = {82, 97, 121, 0, 8, 0, 0, 0};";
  s += "\n.global .align 1 .b8 _ZN21rti_internal_typename14theLaunchIndexE[6] = {117, 105, 110, 116, 50, 0};\n.global .align 4 .";
  s += "u32 _ZN21rti_internal_typeenum14theLaunchIndexE = 4919;\n.global .align 1 .b8 _ZN21rti_internal_semantic14theLaunchIndex";
  s += "E[14] = {114, 116, 76, 97, 117, 110, 99, 104, 73, 110, 100, 101, 120, 0};\n.global .align 1 .b8 _ZN23rti_internal_annota";
  s += "tion14theLaunchIndexE[1];\n\n.visible .entry _Z12rayexceptionv(\n\n)\n{\n\n\n\n ret;\n}";
  return s;
}

inline std::string ptx_program_raygeneration(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 8 .b8 sysTopObject[4];\n.global .align 1 .b8 inNormalsB";
  s += "uffer[1];\n.global .align 1 .b8 inFaceNormalsBuffer[1];\n.global .align 1 .b8 inPositionsBuffer[1];\n.global .align 1 .b";
  s += "8 sysOutputBuffer[1];\n.global .align 4 .u32 px;\n.global .align 4 .u32 py;\n.global .align 4 .u32 sqrtPasses;\n.global ";
  s += ".align 4 .u32 bounceCounts;\n.global .align 4 .u32 numSamples;\n.global .align 4 .u32 baseSeed;\n.global .align 4 .f32 s";
  s += "ceneOffsetHorizontal;\n.global .align 4 .f32 sceneOffsetVertical;\n.global .align 8 .b8 theLaunchDim[8];\n.global .align";
  s += " 8 .b8 theLaunchIndex[8];\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;\n.global .align 8 .u";
  s += "64 _ZN21rti_internal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_excepti";
  s += "on_64_detail1E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.global .align 8 .u64 _ZN";
  s += "21rti_internal_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_";
  s += "detail4E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .align 8 .u64 _ZN21rti_";
  s += "internal_register24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail";
  s += "7E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8 .u64 _ZN21rti_intern";
  s += "al_register24reg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail0E;\n.glo";
  s += "bal .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21rti_internal_register2";
  s += "1reg_exception_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;\n.global .align 4 .u";
  s += "32 _ZN21rti_internal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_";
  s += "detail5E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .align 4 .u32 _ZN21rti_int";
  s += "ernal_register21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail8E;\n.glo";
  s += "bal .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register1";
  s += "4reg_rayIndex_xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .align 4 .u32 _ZN21rti_in";
  s += "ternal_register14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12sysTopObjectE[8] = {82, 97, 121, 0, ";
  s += "4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo2pxE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .";
  s += "b8 _ZN21rti_internal_typeinfo2pyE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo10s";
  s += "qrtPassesE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12bounceCountsE[8] = {82, ";
  s += "97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo10numSamplesE[8] = {82, 97, 121, 0, 4, 0, 0, 0}";
  s += ";\n.global .align 4 .b8 _ZN21rti_internal_typeinfo8baseSeedE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _Z";
  s += "N21rti_internal_typeinfo21sceneOffsetHorizontalE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_inter";
  s += "nal_typeinfo19sceneOffsetVerticalE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12";
  s += "theLaunchDimE[8] = {82, 97, 121, 0, 8, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo14theLaunchIndexE[8] = ";
  s += "{82, 97, 121, 0, 8, 0, 0, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename12sysTopObjectE[9] = {114, 116, 79, 98, 10";
  s += "6, 101, 99, 116, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename2pxE[4] = {105, 110, 116, 0};\n.global .align 1 .b8";
  s += " _ZN21rti_internal_typename2pyE[4] = {105, 110, 116, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename10sqrtPassesE[4";
  s += "] = {105, 110, 116, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename12bounceCountsE[5] = {117, 105, 110, 116, 0};\n.";
  s += "global .align 1 .b8 _ZN21rti_internal_typename10numSamplesE[5] = {117, 105, 110, 116, 0};\n.global .align 1 .b8 _ZN21rti";
  s += "_internal_typename8baseSeedE[5] = {117, 105, 110, 116, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename21sceneOffset";
  s += "HorizontalE[6] = {102, 108, 111, 97, 116, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename19sceneOffsetVerticalE[6] ";
  s += "= {102, 108, 111, 97, 116, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename12theLaunchDimE[6] = {117, 105, 110, 116,";
  s += " 50, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename14theLaunchIndexE[6] = {117, 105, 110, 116, 50, 0};\n.global .a";
  s += "lign 4 .u32 _ZN21rti_internal_typeenum12sysTopObjectE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum2pxE = 49";
  s += "19;\n.global .align 4 .u32 _ZN21rti_internal_typeenum2pyE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum10sqr";
  s += "tPassesE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum12bounceCountsE = 4919;\n.global .align 4 .u32 _ZN21rt";
  s += "i_internal_typeenum10numSamplesE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum8baseSeedE = 4919;\n.global .a";
  s += "lign 4 .u32 _ZN21rti_internal_typeenum21sceneOffsetHorizontalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum";
  s += "19sceneOffsetVerticalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum12theLaunchDimE = 4919;\n.global .align ";
  s += "4 .u32 _ZN21rti_internal_typeenum14theLaunchIndexE = 4919;\n.global .align 1 .b8 _ZN21rti_internal_semantic12sysTopObjec";
  s += "tE[1];\n.global .align 1 .b8 _ZN21rti_internal_semantic2pxE[1];\n.global .align 1 .b8 _ZN21rti_internal_semantic2pyE[1];";
  s += "\n.global .align 1 .b8 _ZN21rti_internal_semantic10sqrtPassesE[1];\n.global .align 1 .b8 _ZN21rti_internal_semantic12bou";
  s += "nceCountsE[1];\n.global .align 1 .b8 _ZN21rti_internal_semantic10numSamplesE[1];\n.global .align 1 .b8 _ZN21rti_internal";
  s += "_semantic8baseSeedE[1];\n.global .align 1 .b8 _ZN21rti_internal_semantic21sceneOffsetHorizontalE[1];\n.global .align 1 .";
  s += "b8 _ZN21rti_internal_semantic19sceneOffsetVerticalE[1];\n.global .align 1 .b8 _ZN21rti_internal_semantic12theLaunchDimE[";
  s += "12] = {114, 116, 76, 97, 117, 110, 99, 104, 68, 105, 109, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic14theLaunc";
  s += "hIndexE[14] = {114, 116, 76, 97, 117, 110, 99, 104, 73, 110, 100, 101, 120, 0};\n.global .align 1 .b8 _ZN23rti_internal_";
  s += "annotation12sysTopObjectE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation2pxE[1];\n.global .align 1 .b8 _ZN23rti_";
  s += "internal_annotation2pyE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation10sqrtPassesE[1];\n.global .align 1 .b8 _Z";
  s += "N23rti_internal_annotation12bounceCountsE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation10numSamplesE[1];\n.glob";
  s += "al .align 1 .b8 _ZN23rti_internal_annotation8baseSeedE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation21sceneOffs";
  s += "etHorizontalE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation19sceneOffsetVerticalE[1];\n.global .align 1 .b8 _ZN";
  s += "23rti_internal_annotation12theLaunchDimE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation14theLaunchIndexE[1];\n.c";
  s += "onst .align 4 .b8 __cudart_i2opi_f[24] = {65, 144, 67, 60, 153, 149, 98, 219, 192, 221, 52, 245, 209, 87, 39, 252, 41, 2";
  s += "1, 68, 78, 110, 131, 249, 162};\n\n.visible .entry _Z13raygenerationv(\n\n)\n{\n .local .align 8 .b8 __local_depot0[104]";
  s += ";\n .reg .b64 %SP;\n .reg .b64 %SPL;\n .reg .pred %p<42>;\n .reg .f32 %f<232>;\n .reg .b32 %r<355>;\n .reg .b64 %rd<61>;";
  s += "\n\n\n mov.u64 %rd60, __local_depot0;\n cvta.local.u64 %SP, %rd60;\n ldu.global.u32 %r82, [theLaunchDim];\n ldu.global.v";
  s += "2.u32 {%r83, %r84}, [theLaunchIndex];\n mad.lo.s32 %r1, %r82, %r84, %r83;\n ldu.global.u32 %r87, [numSamples];\n setp.ge";
  s += ".u32 %p1, %r1, %r87;\n @%p1 bra BB0_56;\n\n ldu.global.u32 %r95, [baseSeed];\n shl.b32 %r96, %r95, 16;\n ldu.global.u32 ";
  s += "%r97, [sqrtPasses];\n ldu.global.u32 %r98, [px];\n ldu.global.u32 %r99, [py];\n mad.lo.s32 %r100, %r97, %r98, %r99;\n or";
  s += ".b32 %r101, %r100, %r96;\n shl.b32 %r102, %r1, 4;\n add.s32 %r103, %r102, -1556008596;\n add.s32 %r104, %r1, -1640531527";
  s += ";\n xor.b32 %r105, %r103, %r104;\n shr.u32 %r106, %r1, 5;\n add.s32 %r107, %r106, -939442524;\n xor.b32 %r108, %r105, %r";
  s += "107;\n add.s32 %r109, %r101, %r108;\n shl.b32 %r110, %r109, 4;\n add.s32 %r111, %r110, -1383041155;\n add.s32 %r112, %r1";
  s += "09, -1640531527;\n xor.b32 %r113, %r111, %r112;\n shr.u32 %r114, %r109, 5;\n add.s32 %r115, %r114, 2123724318;\n xor.b32";
  s += " %r116, %r113, %r115;\n add.s32 %r2, %r116, %r1;\n shl.b32 %r117, %r2, 4;\n add.s32 %r118, %r117, -1556008596;\n add.s32";
  s += " %r119, %r2, 1013904242;\n xor.b32 %r120, %r118, %r119;\n shr.u32 %r121, %r2, 5;\n add.s32 %r122, %r121, -939442524;\n x";
  s += "or.b32 %r123, %r120, %r122;\n add.s32 %r3, %r123, %r109;\n cvt.u64.u32 %rd29, %r1;\n mov.u64 %rd33, inNormalsBuffer;\n c";
  s += "vta.global.u64 %rd16, %rd33;\n mov.u32 %r354, 1;\n mov.u32 %r93, 12;\n mov.u64 %rd32, 0;\n call (%rd15), _rt_buffer_get_";
  s += "64, (%rd16, %r354, %r93, %rd29, %rd32, %rd32, %rd32);\n ld.f32 %f78, [%rd15+8];\n ld.f32 %f79, [%rd15];\n ld.f32 %f80, [";
  s += "%rd15+4];\n mov.u64 %rd34, inFaceNormalsBuffer;\n cvta.global.u64 %rd22, %rd34;\n call (%rd21), _rt_buffer_get_64, (%rd2";
  s += "2, %r354, %r93, %rd29, %rd32, %rd32, %rd32);\n ld.f32 %f3, [%rd21+8];\n ld.f32 %f1, [%rd21];\n ld.f32 %f2, [%rd21+4];\n ";
  s += "mul.f32 %f81, %f80, %f2;\n fma.rn.f32 %f82, %f79, %f1, %f81;\n fma.rn.f32 %f83, %f78, %f3, %f82;\n setp.lt.f32 %p2, %f83";
  s += ", 0f00000000;\n selp.f32 %f4, %f1, %f79, %p2;\n selp.f32 %f5, %f2, %f80, %p2;\n selp.f32 %f6, %f3, %f78, %p2;\n mov.u64 ";
  s += "%rd35, inPositionsBuffer;\n cvta.global.u64 %rd28, %rd35;\n call (%rd27), _rt_buffer_get_64, (%rd28, %r354, %r93, %rd29,";
  s += " %rd32, %rd32, %rd32);\n ld.f32 %f7, [%rd27];\n ld.f32 %f8, [%rd27+4];\n ld.f32 %f9, [%rd27+8];\n abs.f32 %f84, %f4;\n a";
  s += "bs.f32 %f85, %f6;\n setp.gt.f32 %p3, %f84, %f85;\n neg.f32 %f86, %f5;\n neg.f32 %f87, %f6;\n selp.f32 %f88, %f86, 0f0000";
  s += "0000, %p3;\n selp.f32 %f89, %f4, %f87, %p3;\n selp.f32 %f90, 0f00000000, %f5, %p3;\n mul.f32 %f91, %f89, %f89;\n fma.rn.";
  s += "f32 %f92, %f88, %f88, %f91;\n fma.rn.f32 %f93, %f90, %f90, %f92;\n sqrt.rn.f32 %f94, %f93;\n rcp.rn.f32 %f95, %f94;\n mu";
  s += "l.f32 %f10, %f95, %f88;\n mul.f32 %f11, %f95, %f89;\n mul.f32 %f12, %f95, %f90;\n mul.f32 %f96, %f6, %f11;\n mul.f32 %f9";
  s += "7, %f5, %f12;\n sub.f32 %f13, %f96, %f97;\n mul.f32 %f98, %f4, %f12;\n mul.f32 %f99, %f6, %f10;\n sub.f32 %f14, %f98, %f";
  s += "99;\n mul.f32 %f100, %f5, %f10;\n mul.f32 %f101, %f4, %f11;\n sub.f32 %f15, %f100, %f101;\n ld.global.u32 %r124, [px];\n";
  s += " cvt.rn.f32.s32 %f102, %r124;\n mad.lo.s32 %r125, %r3, 1664525, 1013904223;\n and.b32 %r126, %r125, 16777215;\n cvt.rn.f";
  s += "32.u32 %f103, %r126;\n fma.rn.f32 %f104, %f103, 0f33800000, %f102;\n ld.global.u32 %r127, [sqrtPasses];\n cvt.rn.f32.s32";
  s += " %f105, %r127;\n div.rn.f32 %f214, %f104, %f105;\n ld.global.u32 %r128, [py];\n cvt.rn.f32.s32 %f106, %r128;\n mad.lo.s3";
  s += "2 %r332, %r125, 1664525, 1013904223;\n and.b32 %r129, %r332, 16777215;\n cvt.rn.f32.u32 %f107, %r129;\n fma.rn.f32 %f108";
  s += ", %f107, 0f33800000, %f106;\n div.rn.f32 %f215, %f108, %f105;\n mov.u32 %r333, 0;\n\nBB0_2:\n mov.f32 %f19, %f215;\n mov";
  s += ".f32 %f18, %f214;\n sqrt.rn.f32 %f20, %f18;\n mul.f32 %f21, %f19, 0f40C90FDB;\n abs.f32 %f22, %f21;\n setp.neu.f32 %p4, ";
  s += "%f22, 0f7F800000;\n mov.f32 %f222, %f21;\n @%p4 bra BB0_4;\n\n mov.f32 %f109, 0f00000000;\n mul.rn.f32 %f23, %f21, %f109";
  s += ";\n mov.f32 %f222, %f23;\n\nBB0_4:\n mov.f32 %f24, %f222;\n mul.f32 %f110, %f24, 0f3F22F983;\n cvt.rni.s32.f32 %r343, %f";
  s += "110;\n cvt.rn.f32.s32 %f111, %r343;\n neg.f32 %f112, %f111;\n mov.f32 %f113, 0f3FC90FDA;\n fma.rn.f32 %f114, %f112, %f11";
  s += "3, %f24;\n mov.f32 %f115, 0f33A22168;\n fma.rn.f32 %f116, %f112, %f115, %f114;\n mov.f32 %f117, 0f27C234C5;\n fma.rn.f32";
  s += " %f216, %f112, %f117, %f116;\n abs.f32 %f118, %f24;\n setp.leu.f32 %p5, %f118, 0f47CE4780;\n @%p5 bra BB0_14;\n\n mov.b3";
  s += "2 %r8, %f24;\n shr.u32 %r9, %r8, 23;\n shl.b32 %r132, %r8, 8;\n or.b32 %r10, %r132, -2147483648;\n add.u64 %rd37, %SP, 0";
  s += ";\n cvta.to.local.u64 %rd57, %rd37;\n mov.u32 %r335, 0;\n mov.u64 %rd56, __cudart_i2opi_f;\n mov.u32 %r334, -6;\n\nBB0_6";
  s += ":\n .pragma \"nounroll\";\n ld.const.u32 %r135, [%rd56];\n {\n mad.lo.cc.u32 %r133, %r135, %r10, %r335;\n madc.hi.u32 %r";
  s += "335, %r135, %r10, 0;\n }\n st.local.u32 [%rd57], %r133;\n add.s64 %rd57, %rd57, 4;\n add.s64 %rd56, %rd56, 4;\n add.s32 ";
  s += "%r334, %r334, 1;\n setp.ne.s32 %p6, %r334, 0;\n @%p6 bra BB0_6;\n\n and.b32 %r138, %r9, 255;\n add.s32 %r139, %r138, -12";
  s += "8;\n shr.u32 %r140, %r139, 5;\n and.b32 %r15, %r8, -2147483648;\n cvta.to.local.u64 %rd39, %rd37;\n st.local.u32 [%rd39+";
  s += "24], %r335;\n mov.u32 %r141, 6;\n sub.s32 %r142, %r141, %r140;\n mul.wide.s32 %rd40, %r142, 4;\n add.s64 %rd7, %rd39, %r";
  s += "d40;\n ld.local.u32 %r336, [%rd7];\n ld.local.u32 %r337, [%rd7+-4];\n and.b32 %r18, %r9, 31;\n setp.eq.s32 %p7, %r18, 0;";
  s += "\n @%p7 bra BB0_9;\n\n mov.u32 %r143, 32;\n sub.s32 %r144, %r143, %r18;\n shr.u32 %r145, %r337, %r144;\n shl.b32 %r146, ";
  s += "%r336, %r18;\n add.s32 %r336, %r145, %r146;\n ld.local.u32 %r147, [%rd7+-8];\n shr.u32 %r148, %r147, %r144;\n shl.b32 %r";
  s += "149, %r337, %r18;\n add.s32 %r337, %r148, %r149;\n\nBB0_9:\n shr.u32 %r150, %r337, 30;\n shl.b32 %r151, %r336, 2;\n add.";
  s += "s32 %r338, %r150, %r151;\n shl.b32 %r24, %r337, 2;\n shr.u32 %r152, %r338, 31;\n shr.u32 %r153, %r336, 30;\n add.s32 %r2";
  s += "5, %r152, %r153;\n setp.eq.s32 %p8, %r152, 0;\n mov.u32 %r339, %r15;\n mov.u32 %r340, %r24;\n @%p8 bra BB0_11;\n\n not.b";
  s += "32 %r154, %r338;\n neg.s32 %r26, %r24;\n setp.eq.s32 %p9, %r24, 0;\n selp.u32 %r155, 1, 0, %p9;\n add.s32 %r338, %r155, ";
  s += "%r154;\n xor.b32 %r28, %r15, -2147483648;\n mov.u32 %r339, %r28;\n mov.u32 %r340, %r26;\n\nBB0_11:\n mov.u32 %r30, %r339";
  s += ";\n neg.s32 %r156, %r25;\n setp.eq.s32 %p10, %r15, 0;\n selp.b32 %r343, %r25, %r156, %p10;\n clz.b32 %r342, %r338;\n set";
  s += "p.eq.s32 %p11, %r342, 0;\n shl.b32 %r157, %r338, %r342;\n mov.u32 %r158, 32;\n sub.s32 %r159, %r158, %r342;\n shr.u32 %r";
  s += "160, %r340, %r159;\n add.s32 %r161, %r160, %r157;\n selp.b32 %r34, %r338, %r161, %p11;\n mov.u32 %r162, -921707870;\n mu";
  s += "l.hi.u32 %r341, %r34, %r162;\n setp.lt.s32 %p12, %r341, 1;\n @%p12 bra BB0_13;\n\n mul.lo.s32 %r163, %r34, -921707870;\n";
  s += " shr.u32 %r164, %r163, 31;\n shl.b32 %r165, %r341, 1;\n add.s32 %r341, %r164, %r165;\n add.s32 %r342, %r342, 1;\n\nBB0_1";
  s += "3:\n mov.u32 %r166, 126;\n sub.s32 %r167, %r166, %r342;\n shl.b32 %r168, %r167, 23;\n add.s32 %r169, %r341, 1;\n shr.u32";
  s += " %r170, %r169, 7;\n add.s32 %r171, %r170, 1;\n shr.u32 %r172, %r171, 1;\n add.s32 %r173, %r172, %r168;\n or.b32 %r174, %";
  s += "r173, %r30;\n mov.b32 %f216, %r174;\n\nBB0_14:\n mul.rn.f32 %f28, %f216, %f216;\n add.s32 %r41, %r343, 1;\n and.b32 %r42";
  s += ", %r41, 1;\n setp.eq.s32 %p13, %r42, 0;\n @%p13 bra BB0_16;\n bra.uni BB0_15;\n\nBB0_16:\n mov.f32 %f121, 0f3C08839E;\n ";
  s += "mov.f32 %f122, 0fB94CA1F9;\n fma.rn.f32 %f217, %f122, %f28, %f121;\n bra.uni BB0_17;\n\nBB0_15:\n mov.f32 %f119, 0fBAB60";
  s += "61A;\n mov.f32 %f120, 0f37CCF5CE;\n fma.rn.f32 %f217, %f120, %f28, %f119;\n\nBB0_17:\n @%p13 bra BB0_19;\n bra.uni BB0_1";
  s += "8;\n\nBB0_19:\n mov.f32 %f126, 0fBE2AAAA3;\n fma.rn.f32 %f127, %f217, %f28, %f126;\n mov.f32 %f128, 0f00000000;\n fma.rn";
  s += ".f32 %f218, %f127, %f28, %f128;\n bra.uni BB0_20;\n\nBB0_18:\n mov.f32 %f123, 0f3D2AAAA5;\n fma.rn.f32 %f124, %f217, %f2";
  s += "8, %f123;\n mov.f32 %f125, 0fBF000000;\n fma.rn.f32 %f218, %f124, %f28, %f125;\n\nBB0_20:\n fma.rn.f32 %f219, %f218, %f2";
  s += "16, %f216;\n @%p13 bra BB0_22;\n\n mov.f32 %f129, 0f3F800000;\n fma.rn.f32 %f219, %f218, %f28, %f129;\n\nBB0_22:\n and.b";
  s += "32 %r175, %r41, 2;\n setp.eq.s32 %p16, %r175, 0;\n @%p16 bra BB0_24;\n\n mov.f32 %f130, 0f00000000;\n mov.f32 %f131, 0fB";
  s += "F800000;\n fma.rn.f32 %f219, %f219, %f131, %f130;\n\nBB0_24:\n mov.f32 %f221, %f21;\n @%p4 bra BB0_26;\n\n mov.f32 %f132";
  s += ", 0f00000000;\n mul.rn.f32 %f221, %f21, %f132;\n\nBB0_26:\n mul.f32 %f133, %f221, 0f3F22F983;\n cvt.rni.s32.f32 %r353, %";
  s += "f133;\n cvt.rn.f32.s32 %f134, %r353;\n neg.f32 %f135, %f134;\n fma.rn.f32 %f137, %f135, %f113, %f221;\n fma.rn.f32 %f139";
  s += ", %f135, %f115, %f137;\n fma.rn.f32 %f223, %f135, %f117, %f139;\n abs.f32 %f141, %f221;\n setp.leu.f32 %p18, %f141, 0f47";
  s += "CE4780;\n @%p18 bra BB0_36;\n\n mov.b32 %r44, %f221;\n shr.u32 %r45, %r44, 23;\n shl.b32 %r178, %r44, 8;\n or.b32 %r46, ";
  s += "%r178, -2147483648;\n add.u64 %rd42, %SP, 0;\n cvta.to.local.u64 %rd59, %rd42;\n mov.u32 %r345, 0;\n mov.u64 %rd58, __cu";
  s += "dart_i2opi_f;\n mov.u32 %r344, -6;\n\nBB0_28:\n .pragma \"nounroll\";\n ld.const.u32 %r181, [%rd58];\n {\n mad.lo.cc.u32";
  s += " %r179, %r181, %r46, %r345;\n madc.hi.u32 %r345, %r181, %r46, 0;\n }\n st.local.u32 [%rd59], %r179;\n add.s64 %rd59, %rd";
  s += "59, 4;\n add.s64 %rd58, %rd58, 4;\n add.s32 %r344, %r344, 1;\n setp.ne.s32 %p19, %r344, 0;\n @%p19 bra BB0_28;\n\n and.b";
  s += "32 %r184, %r45, 255;\n add.s32 %r185, %r184, -128;\n shr.u32 %r186, %r185, 5;\n and.b32 %r51, %r44, -2147483648;\n cvta.";
  s += "to.local.u64 %rd44, %rd42;\n st.local.u32 [%rd44+24], %r345;\n mov.u32 %r187, 6;\n sub.s32 %r188, %r187, %r186;\n mul.wi";
  s += "de.s32 %rd45, %r188, 4;\n add.s64 %rd13, %rd44, %rd45;\n ld.local.u32 %r346, [%rd13];\n ld.local.u32 %r347, [%rd13+-4];";
  s += "\n and.b32 %r54, %r45, 31;\n setp.eq.s32 %p20, %r54, 0;\n @%p20 bra BB0_31;\n\n mov.u32 %r189, 32;\n sub.s32 %r190, %r18";
  s += "9, %r54;\n shr.u32 %r191, %r347, %r190;\n shl.b32 %r192, %r346, %r54;\n add.s32 %r346, %r191, %r192;\n ld.local.u32 %r19";
  s += "3, [%rd13+-8];\n shr.u32 %r194, %r193, %r190;\n shl.b32 %r195, %r347, %r54;\n add.s32 %r347, %r194, %r195;\n\nBB0_31:\n ";
  s += "shr.u32 %r196, %r347, 30;\n shl.b32 %r197, %r346, 2;\n add.s32 %r348, %r196, %r197;\n shl.b32 %r60, %r347, 2;\n shr.u32 ";
  s += "%r198, %r348, 31;\n shr.u32 %r199, %r346, 30;\n add.s32 %r61, %r198, %r199;\n setp.eq.s32 %p21, %r198, 0;\n mov.u32 %r34";
  s += "9, %r51;\n mov.u32 %r350, %r60;\n @%p21 bra BB0_33;\n\n not.b32 %r200, %r348;\n neg.s32 %r62, %r60;\n setp.eq.s32 %p22, ";
  s += "%r60, 0;\n selp.u32 %r201, 1, 0, %p22;\n add.s32 %r348, %r201, %r200;\n xor.b32 %r64, %r51, -2147483648;\n mov.u32 %r349";
  s += ", %r64;\n mov.u32 %r350, %r62;\n\nBB0_33:\n mov.u32 %r66, %r349;\n neg.s32 %r202, %r61;\n setp.eq.s32 %p23, %r51, 0;\n s";
  s += "elp.b32 %r353, %r61, %r202, %p23;\n clz.b32 %r352, %r348;\n setp.eq.s32 %p24, %r352, 0;\n shl.b32 %r203, %r348, %r352;\n";
  s += " mov.u32 %r204, 32;\n sub.s32 %r205, %r204, %r352;\n shr.u32 %r206, %r350, %r205;\n add.s32 %r207, %r206, %r203;\n selp.";
  s += "b32 %r70, %r348, %r207, %p24;\n mov.u32 %r208, -921707870;\n mul.hi.u32 %r351, %r70, %r208;\n setp.lt.s32 %p25, %r351, 1";
  s += ";\n @%p25 bra BB0_35;\n\n mul.lo.s32 %r209, %r70, -921707870;\n shr.u32 %r210, %r209, 31;\n shl.b32 %r211, %r351, 1;\n a";
  s += "dd.s32 %r351, %r210, %r211;\n add.s32 %r352, %r352, 1;\n\nBB0_35:\n mov.u32 %r212, 126;\n sub.s32 %r213, %r212, %r352;\n";
  s += " shl.b32 %r214, %r213, 23;\n add.s32 %r215, %r351, 1;\n shr.u32 %r216, %r215, 7;\n add.s32 %r217, %r216, 1;\n shr.u32 %r";
  s += "218, %r217, 1;\n add.s32 %r219, %r218, %r214;\n or.b32 %r220, %r219, %r66;\n mov.b32 %f223, %r220;\n\nBB0_36:\n mul.rn.f";
  s += "32 %f45, %f223, %f223;\n and.b32 %r77, %r353, 1;\n setp.eq.s32 %p26, %r77, 0;\n @%p26 bra BB0_38;\n bra.uni BB0_37;\n\nB";
  s += "B0_38:\n mov.f32 %f144, 0f3C08839E;\n mov.f32 %f145, 0fB94CA1F9;\n fma.rn.f32 %f224, %f145, %f45, %f144;\n bra.uni BB0_3";
  s += "9;\n\nBB0_37:\n mov.f32 %f142, 0fBAB6061A;\n mov.f32 %f143, 0f37CCF5CE;\n fma.rn.f32 %f224, %f143, %f45, %f142;\n\nBB0_3";
  s += "9:\n @%p26 bra BB0_41;\n bra.uni BB0_40;\n\nBB0_41:\n mov.f32 %f149, 0fBE2AAAA3;\n fma.rn.f32 %f150, %f224, %f45, %f149;";
  s += "\n mov.f32 %f151, 0f00000000;\n fma.rn.f32 %f225, %f150, %f45, %f151;\n bra.uni BB0_42;\n\nBB0_40:\n mov.f32 %f146, 0f3D";
  s += "2AAAA5;\n fma.rn.f32 %f147, %f224, %f45, %f146;\n mov.f32 %f148, 0fBF000000;\n fma.rn.f32 %f225, %f147, %f45, %f148;\n\n";
  s += "BB0_42:\n fma.rn.f32 %f226, %f225, %f223, %f223;\n @%p26 bra BB0_44;\n\n mov.f32 %f152, 0f3F800000;\n fma.rn.f32 %f226, ";
  s += "%f225, %f45, %f152;\n\nBB0_44:\n and.b32 %r221, %r353, 2;\n setp.eq.s32 %p29, %r221, 0;\n @%p29 bra BB0_46;\n\n mov.f32 ";
  s += "%f153, 0f00000000;\n mov.f32 %f154, 0fBF800000;\n fma.rn.f32 %f226, %f226, %f154, %f153;\n\nBB0_46:\n mul.f32 %f155, %f2";
  s += "0, %f219;\n mul.f32 %f156, %f155, %f155;\n mov.f32 %f230, 0f3F800000;\n sub.f32 %f158, %f230, %f156;\n mul.f32 %f159, %f";
  s += "20, %f226;\n mul.f32 %f160, %f159, %f159;\n sub.f32 %f161, %f158, %f160;\n mov.f32 %f231, 0f00000000;\n max.f32 %f163, %";
  s += "f231, %f161;\n sqrt.rn.f32 %f164, %f163;\n mul.f32 %f165, %f10, %f159;\n mul.f32 %f166, %f11, %f159;\n mul.f32 %f167, %f";
  s += "12, %f159;\n fma.rn.f32 %f168, %f13, %f155, %f165;\n fma.rn.f32 %f169, %f14, %f155, %f166;\n fma.rn.f32 %f170, %f15, %f1";
  s += "55, %f167;\n fma.rn.f32 %f57, %f4, %f164, %f168;\n fma.rn.f32 %f58, %f5, %f164, %f169;\n fma.rn.f32 %f59, %f6, %f164, %f";
  s += "170;\n mad.lo.s32 %r222, %r332, 1664525, 1013904223;\n and.b32 %r223, %r222, 16777215;\n cvt.rn.f32.u32 %f171, %r223;\n ";
  s += "mul.f32 %f214, %f171, 0f33800000;\n mad.lo.s32 %r332, %r222, 1664525, 1013904223;\n and.b32 %r224, %r332, 16777215;\n cv";
  s += "t.rn.f32.u32 %f172, %r224;\n mul.f32 %f215, %f172, 0f33800000;\n add.s32 %r333, %r333, 1;\n setp.gt.u32 %p30, %r333, 4;";
  s += "\n mul.f32 %f173, %f2, %f58;\n fma.rn.f32 %f174, %f1, %f57, %f173;\n fma.rn.f32 %f62, %f3, %f59, %f174;\n setp.gtu.f32 %";
  s += "p31, %f62, 0f00000000;\n or.pred %p32, %p30, %p31;\n @!%p32 bra BB0_2;\n bra.uni BB0_47;\n\nBB0_47:\n neg.f32 %f176, %f5";
  s += "7;\n neg.f32 %f177, %f58;\n neg.f32 %f178, %f59;\n selp.f32 %f179, %f59, %f178, %p31;\n shl.b32 %r225, %r3, 4;\n add.s32";
  s += " %r226, %r225, -1383041155;\n add.s32 %r227, %r3, 1013904242;\n xor.b32 %r228, %r226, %r227;\n shr.u32 %r229, %r3, 5;\n ";
  s += "add.s32 %r230, %r229, 2123724318;\n xor.b32 %r231, %r228, %r230;\n add.s32 %r232, %r231, %r2;\n shl.b32 %r233, %r232, 4;";
  s += "\n add.s32 %r234, %r233, -1556008596;\n add.s32 %r235, %r232, -626627285;\n xor.b32 %r236, %r234, %r235;\n shr.u32 %r237";
  s += ", %r232, 5;\n add.s32 %r238, %r237, -939442524;\n xor.b32 %r239, %r236, %r238;\n add.s32 %r240, %r239, %r3;\n shl.b32 %r";
  s += "241, %r240, 4;\n add.s32 %r242, %r241, -1383041155;\n add.s32 %r243, %r240, -626627285;\n xor.b32 %r244, %r242, %r243;\n";
  s += " shr.u32 %r245, %r240, 5;\n add.s32 %r246, %r245, 2123724318;\n xor.b32 %r247, %r244, %r246;\n add.s32 %r248, %r247, %r2";
  s += "32;\n shl.b32 %r249, %r248, 4;\n add.s32 %r250, %r249, -1556008596;\n add.s32 %r251, %r248, 2027808484;\n xor.b32 %r252,";
  s += " %r250, %r251;\n shr.u32 %r253, %r248, 5;\n add.s32 %r254, %r253, -939442524;\n xor.b32 %r255, %r252, %r254;\n add.s32 %";
  s += "r256, %r255, %r240;\n shl.b32 %r257, %r256, 4;\n add.s32 %r258, %r257, -1383041155;\n add.s32 %r259, %r256, 2027808484;";
  s += "\n xor.b32 %r260, %r258, %r259;\n shr.u32 %r261, %r256, 5;\n add.s32 %r262, %r261, 2123724318;\n xor.b32 %r263, %r260, %";
  s += "r262;\n add.s32 %r264, %r263, %r248;\n shl.b32 %r265, %r264, 4;\n add.s32 %r266, %r265, -1556008596;\n add.s32 %r267, %r";
  s += "264, 387276957;\n xor.b32 %r268, %r266, %r267;\n shr.u32 %r269, %r264, 5;\n add.s32 %r270, %r269, -939442524;\n xor.b32 ";
  s += "%r271, %r268, %r270;\n add.s32 %r272, %r271, %r256;\n shl.b32 %r273, %r272, 4;\n add.s32 %r274, %r273, -1383041155;\n ad";
  s += "d.s32 %r275, %r272, 387276957;\n xor.b32 %r276, %r274, %r275;\n shr.u32 %r277, %r272, 5;\n add.s32 %r278, %r277, 2123724";
  s += "318;\n xor.b32 %r279, %r276, %r278;\n add.s32 %r280, %r279, %r264;\n shl.b32 %r281, %r280, 4;\n add.s32 %r282, %r281, -1";
  s += "556008596;\n add.s32 %r283, %r280, -1253254570;\n xor.b32 %r284, %r282, %r283;\n shr.u32 %r285, %r280, 5;\n add.s32 %r28";
  s += "6, %r285, -939442524;\n xor.b32 %r287, %r284, %r286;\n add.s32 %r288, %r287, %r272;\n shl.b32 %r289, %r288, 4;\n add.s32";
  s += " %r290, %r289, -1383041155;\n add.s32 %r291, %r288, -1253254570;\n xor.b32 %r292, %r290, %r291;\n shr.u32 %r293, %r288, ";
  s += "5;\n add.s32 %r294, %r293, 2123724318;\n xor.b32 %r295, %r292, %r294;\n add.s32 %r296, %r295, %r280;\n shl.b32 %r297, %r";
  s += "296, 4;\n add.s32 %r298, %r297, -1556008596;\n add.s32 %r299, %r296, 1401181199;\n xor.b32 %r300, %r298, %r299;\n shr.u3";
  s += "2 %r301, %r296, 5;\n add.s32 %r302, %r301, -939442524;\n xor.b32 %r303, %r300, %r302;\n add.s32 %r304, %r303, %r288;\n s";
  s += "hl.b32 %r305, %r304, 4;\n add.s32 %r306, %r305, -1383041155;\n add.s32 %r307, %r304, 1401181199;\n xor.b32 %r308, %r306,";
  s += " %r307;\n shr.u32 %r309, %r304, 5;\n add.s32 %r310, %r309, 2123724318;\n xor.b32 %r311, %r308, %r310;\n add.s32 %r312, %";
  s += "r311, %r296;\n shl.b32 %r313, %r312, 4;\n add.s32 %r314, %r313, -1556008596;\n add.s32 %r315, %r312, -239350328;\n xor.b";
  s += "32 %r316, %r314, %r315;\n shr.u32 %r317, %r312, 5;\n add.s32 %r318, %r317, -939442524;\n xor.b32 %r319, %r316, %r318;\n ";
  s += "add.s32 %r320, %r319, %r304;\n add.u64 %rd46, %SP, 32;\n cvta.to.local.u64 %rd47, %rd46;\n add.s64 %rd14, %rd47, 68;\n s";
  s += "t.local.u32 [%rd47+68], %r320;\n selp.f32 %f180, %f57, %f176, %p31;\n add.f32 %f181, %f4, %f180;\n selp.f32 %f182, %f58,";
  s += " %f177, %p31;\n add.f32 %f183, %f5, %f182;\n add.f32 %f184, %f6, %f179;\n st.local.v2.f32 [%rd47+24], {%f180, %f182};\n ";
  s += "st.local.f32 [%rd47+32], %f179;\n ld.global.f32 %f185, [sceneOffsetHorizontal];\n mul.f32 %f186, %f181, %f185;\n ld.glob";
  s += "al.f32 %f187, [sceneOffsetVertical];\n mul.f32 %f188, %f183, %f187;\n mul.f32 %f189, %f184, %f185;\n fma.rn.f32 %f229, %";
  s += "f189, 0f3F000000, %f9;\n fma.rn.f32 %f228, %f188, 0f3F000000, %f8;\n fma.rn.f32 %f227, %f186, 0f3F000000, %f7;\n st.loca";
  s += "l.v2.f32 [%rd47], {%f227, %f228};\n st.local.f32 [%rd47+8], %f229;\n ld.global.u32 %r321, [bounceCounts];\n setp.eq.s32 ";
  s += "%p34, %r321, 0;\n @%p34 bra BB0_55;\n\n mov.f32 %f231, 0f00000000;\n bra.uni BB0_49;\n\nBB0_54:\n ld.local.f32 %f229, [%";
  s += "rd14+-60];\n ld.local.v2.f32 {%f210, %f211}, [%rd14+-68];\n mov.f32 %f228, %f211;\n mov.f32 %f227, %f210;\n add.s32 %r35";
  s += "4, %r354, 1;\n\nBB0_49:\n mov.f32 %f68, %f229;\n mov.f32 %f67, %f228;\n mov.f32 %f66, %f227;\n ld.local.f32 %f200, [%rd1";
  s += "4+-44];\n neg.f32 %f201, %f200;\n ld.local.f32 %f202, [%rd14+-40];\n neg.f32 %f203, %f202;\n ld.local.f32 %f204, [%rd14+";
  s += "-36];\n neg.f32 %f205, %f204;\n st.local.f32 [%rd14+-56], %f201;\n st.local.f32 [%rd14+-52], %f203;\n st.local.f32 [%rd1";
  s += "4+-48], %f205;\n mov.u32 %r326, 0;\n st.local.u32 [%rd14+-20], %r326;\n ld.local.f32 %f197, [%rd14+-36];\n ld.local.f32 ";
  s += "%f196, [%rd14+-40];\n ld.local.f32 %f195, [%rd14+-44];\n ld.global.u32 %r323, [sysTopObject];\n mov.f32 %f198, 0f3A83126";
  s += "F;\n mov.f32 %f199, 0f6C4ECB8F;\n mov.u32 %r325, 255;\n mov.u32 %r327, 72;\n call _rt_trace_mask_flags_64, (%r323, %f66,";
  s += " %f67, %f68, %f195, %f196, %f197, %r326, %f198, %f199, %r325, %r326, %rd46, %r327);\n ld.local.f32 %f206, [%rd14+-28];\n";
  s += " fma.rn.f32 %f231, %f230, %f206, %f231;\n ld.local.u32 %r328, [%rd14+-20];\n setp.lt.s32 %p35, %r328, 0;\n @%p35 bra BB0";
  s += "_55;\n\n ld.local.f32 %f207, [%rd14+-4];\n setp.le.f32 %p36, %f207, 0f00000000;\n @%p36 bra BB0_55;\n\n ld.local.f32 %f2";
  s += "08, [%rd14+-16];\n setp.eq.f32 %p37, %f208, 0f00000000;\n ld.local.f32 %f72, [%rd14+-12];\n setp.eq.f32 %p38, %f72, 0f00";
  s += "000000;\n and.pred %p39, %p37, %p38;\n @!%p39 bra BB0_53;\n bra.uni BB0_52;\n\nBB0_52:\n ld.local.f32 %f209, [%rd14+-8];";
  s += "\n setp.eq.f32 %p40, %f209, 0f00000000;\n @%p40 bra BB0_55;\n\nBB0_53:\n mul.f32 %f230, %f230, %f72;\n ld.global.u32 %r3";
  s += "29, [bounceCounts];\n setp.ge.u32 %p41, %r354, %r329;\n @%p41 bra BB0_55;\n bra.uni BB0_54;\n\nBB0_55:\n mov.u64 %rd55, ";
  s += "sysOutputBuffer;\n cvta.global.u64 %rd50, %rd55;\n mov.u32 %r330, 2;\n mov.u32 %r331, 4;\n call (%rd49), _rt_buffer_get_";
  s += "64, (%rd50, %r330, %r331, %rd29, %rd32, %rd32, %rd32);\n ld.f32 %f212, [%rd49];\n add.f32 %f213, %f231, %f212;\n st.f32 ";
  s += "[%rd49], %f213;\n\nBB0_56:\n ret;\n}";
  return s;
}

inline std::string ptx_program_rayhit_emissive(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 4 .b8 sysTopObject[4];\n.global .align 4 .b8 theRay[36]";
  s += ";\n.global .align 4 .f32 theIntersectionDistance;\n.global .align 4 .b8 thePrd[72];\n.global .align 4 .b8 varGeoNormal[1";
  s += "2];\n.global .align 4 .b8 varNormal[12];\n.global .align 4 .b8 varTexCoord[12];\n.global .align 4 .f32 parMaterialAlbedo";
  s += ";\n.global .align 4 .f32 parMaterialEmissive;\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;";
  s += "\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_";
  s += "register24reg_exception_64_detail1E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.glo";
  s += "bal .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_regist";
  s += "er24reg_exception_64_detail4E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .a";
  s += "lign 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24re";
  s += "g_exception_64_detail7E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8";
  s += " .u64 _ZN21rti_internal_register24reg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exce";
  s += "ption_detail0E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21r";
  s += "ti_internal_register21reg_exception_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;";
  s += "\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_reg";
  s += "ister21reg_exception_detail5E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .alig";
  s += "n 4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exce";
  s += "ption_detail8E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21r";
  s += "ti_internal_register14reg_rayIndex_xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .ali";
  s += "gn 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12sysTopObjectE[8";
  s += "] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo6theRayE[8] = {82, 97, 121, 0, 36, 0, ";
  s += "0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo23theIntersectionDistanceE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.g";
  s += "lobal .align 4 .b8 _ZN21rti_internal_typeinfo6thePrdE[8] = {82, 97, 121, 0, 72, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti";
  s += "_internal_typeinfo12varGeoNormalE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo9v";
  s += "arNormalE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo11varTexCoordE[8] = {82, 9";
  s += "7, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo17parMaterialAlbedoE[8] = {82, 97, 121, 0, 4, 0";
  s += ", 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo19parMaterialEmissiveE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.glo";
  s += "bal .align 1 .b8 _ZN21rti_internal_typename12sysTopObjectE[9] = {114, 116, 79, 98, 106, 101, 99, 116, 0};\n.global .alig";
  s += "n 1 .b8 _ZN21rti_internal_typename6theRayE[11] = {111, 112, 116, 105, 120, 58, 58, 82, 97, 121, 0};\n.global .align 1 .b";
  s += "8 _ZN21rti_internal_typename23theIntersectionDistanceE[6] = {102, 108, 111, 97, 116, 0};\n.global .align 1 .b8 _ZN21rti_";
  s += "internal_typename6thePrdE[11] = {80, 101, 114, 82, 97, 121, 68, 97, 116, 97, 0};\n.global .align 1 .b8 _ZN21rti_internal";
  s += "_typename12varGeoNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .align 1 .b8 _";
  s += "ZN21rti_internal_typename9varNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .a";
  s += "lign 1 .b8 _ZN21rti_internal_typename11varTexCoordE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, ";
  s += "0};\n.global .align 1 .b8 _ZN21rti_internal_typename17parMaterialAlbedoE[6] = {102, 108, 111, 97, 116, 0};\n.global .ali";
  s += "gn 1 .b8 _ZN21rti_internal_typename19parMaterialEmissiveE[6] = {102, 108, 111, 97, 116, 0};\n.global .align 4 .u32 _ZN21";
  s += "rti_internal_typeenum12sysTopObjectE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum6theRayE = 4919;\n.global ";
  s += ".align 4 .u32 _ZN21rti_internal_typeenum23theIntersectionDistanceE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_type";
  s += "enum6thePrdE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum12varGeoNormalE = 4919;\n.global .align 4 .u32 _ZN";
  s += "21rti_internal_typeenum9varNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum11varTexCoordE = 4919;\n.glo";
  s += "bal .align 4 .u32 _ZN21rti_internal_typeenum17parMaterialAlbedoE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeen";
  s += "um19parMaterialEmissiveE = 4919;\n.global .align 1 .b8 _ZN21rti_internal_semantic12sysTopObjectE[1];\n.global .align 1 .";
  s += "b8 _ZN21rti_internal_semantic6theRayE[13] = {114, 116, 67, 117, 114, 114, 101, 110, 116, 82, 97, 121, 0};\n.global .alig";
  s += "n 1 .b8 _ZN21rti_internal_semantic23theIntersectionDistanceE[23] = {114, 116, 73, 110, 116, 101, 114, 115, 101, 99, 116,";
  s += " 105, 111, 110, 68, 105, 115, 116, 97, 110, 99, 101, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic6thePrdE[10] = ";
  s += "{114, 116, 80, 97, 121, 108, 111, 97, 100, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic12varGeoNormalE[21] = {97";
  s += ", 116, 116, 114, 105, 98, 117, 116, 101, 32, 71, 69, 79, 95, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_";
  s += "internal_semantic9varNormalE[17] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 78, 79, 82, 77, 65, 76, 0};\n.global ";
  s += ".align 1 .b8 _ZN21rti_internal_semantic11varTexCoordE[19] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 84, 69, 88, ";
  s += "67, 79, 79, 82, 68, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic17parMaterialAlbedoE[1];\n.global .align 1 .b8 _";
  s += "ZN21rti_internal_semantic19parMaterialEmissiveE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation12sysTopObjectE[1]";
  s += ";\n.global .align 1 .b8 _ZN23rti_internal_annotation6theRayE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation23the";
  s += "IntersectionDistanceE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation6thePrdE[1];\n.global .align 1 .b8 _ZN23rti_";
  s += "internal_annotation12varGeoNormalE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation9varNormalE[1];\n.global .align";
  s += " 1 .b8 _ZN23rti_internal_annotation11varTexCoordE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation17parMaterialAlb";
  s += "edoE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation19parMaterialEmissiveE[1];\n\n.visible .entry _Z15rayhit_emis";
  s += "sivev(\n\n)\n{\n .reg .f32 %f<2>;\n .reg .b32 %r<3>;\n .reg .b64 %rd<3>;\n\n\n ldu.global.f32 %f1, [parMaterialEmissive]";
  s += ";\n mov.u64 %rd1, thePrd;\n st.global.f32 [thePrd+36], %f1;\n st.global.f32 [thePrd+40], %f1;\n st.global.f32 [thePrd+44";
  s += "], %f1;\n add.s64 %rd2, %rd1, 48;\n ldu.global.u32 %r1, [%rd2];\n or.b32 %r2, %r1, -2147483648;\n st.global.u32 [thePrd+";
  s += "48], %r2;\n ret;\n}";
  return s;
}

inline std::string ptx_program_rayhit(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 4 .b8 sysTopObject[4];\n.global .align 4 .b8 theRay[36]";
  s += ";\n.global .align 4 .f32 theIntersectionDistance;\n.global .align 8 .b8 thePrd[72];\n.global .align 4 .b8 varGeoNormal[1";
  s += "2];\n.global .align 4 .b8 varNormal[12];\n.global .align 4 .b8 varTexCoord[12];\n.global .align 4 .f32 parMaterialAlbedo";
  s += ";\n.global .align 4 .u32 parMaterialTexture;\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;\n";
  s += ".global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_re";
  s += "gister24reg_exception_64_detail1E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.globa";
  s += "l .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_register";
  s += "24reg_exception_64_detail4E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .ali";
  s += "gn 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_";
  s += "exception_64_detail7E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8 .";
  s += "u64 _ZN21rti_internal_register24reg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_except";
  s += "ion_detail0E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21rti";
  s += "_internal_register21reg_exception_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;\n";
  s += ".global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_regis";
  s += "ter21reg_exception_detail5E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .align ";
  s += "4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_except";
  s += "ion_detail8E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21rti";
  s += "_internal_register14reg_rayIndex_xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .align";
  s += " 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12sysTopObjectE[8] ";
  s += "= {82, 97, 121, 0, 4, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo6theRayE[8] = {82, 97, 121, 0, 36, 0, 0,";
  s += " 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo23theIntersectionDistanceE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.glo";
  s += "bal .align 4 .b8 _ZN21rti_internal_typeinfo6thePrdE[8] = {82, 97, 121, 0, 72, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_i";
  s += "nternal_typeinfo12varGeoNormalE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo9var";
  s += "NormalE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo11varTexCoordE[8] = {82, 97,";
  s += " 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo17parMaterialAlbedoE[8] = {82, 97, 121, 0, 4, 0, ";
  s += "0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo18parMaterialTextureE[8] = {82, 97, 121, 0, 4, 0, 0, 0};\n.global";
  s += " .align 1 .b8 _ZN21rti_internal_typename12sysTopObjectE[9] = {114, 116, 79, 98, 106, 101, 99, 116, 0};\n.global .align 1";
  s += " .b8 _ZN21rti_internal_typename6theRayE[11] = {111, 112, 116, 105, 120, 58, 58, 82, 97, 121, 0};\n.global .align 1 .b8 _";
  s += "ZN21rti_internal_typename23theIntersectionDistanceE[6] = {102, 108, 111, 97, 116, 0};\n.global .align 1 .b8 _ZN21rti_int";
  s += "ernal_typename6thePrdE[11] = {80, 101, 114, 82, 97, 121, 68, 97, 116, 97, 0};\n.global .align 1 .b8 _ZN21rti_internal_ty";
  s += "pename12varGeoNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .align 1 .b8 _ZN2";
  s += "1rti_internal_typename9varNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .alig";
  s += "n 1 .b8 _ZN21rti_internal_typename11varTexCoordE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};";
  s += "\n.global .align 1 .b8 _ZN21rti_internal_typename17parMaterialAlbedoE[6] = {102, 108, 111, 97, 116, 0};\n.global .align ";
  s += "1 .b8 _ZN21rti_internal_typename18parMaterialTextureE[4] = {105, 110, 116, 0};\n.global .align 4 .u32 _ZN21rti_internal_";
  s += "typeenum12sysTopObjectE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum6theRayE = 4919;\n.global .align 4 .u32";
  s += " _ZN21rti_internal_typeenum23theIntersectionDistanceE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum6thePrdE ";
  s += "= 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum12varGeoNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_interna";
  s += "l_typeenum9varNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum11varTexCoordE = 4919;\n.global .align 4 ";
  s += ".u32 _ZN21rti_internal_typeenum17parMaterialAlbedoE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum18parMateri";
  s += "alTextureE = 4919;\n.global .align 1 .b8 _ZN21rti_internal_semantic12sysTopObjectE[1];\n.global .align 1 .b8 _ZN21rti_in";
  s += "ternal_semantic6theRayE[13] = {114, 116, 67, 117, 114, 114, 101, 110, 116, 82, 97, 121, 0};\n.global .align 1 .b8 _ZN21r";
  s += "ti_internal_semantic23theIntersectionDistanceE[23] = {114, 116, 73, 110, 116, 101, 114, 115, 101, 99, 116, 105, 111, 110";
  s += ", 68, 105, 115, 116, 97, 110, 99, 101, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic6thePrdE[10] = {114, 116, 80,";
  s += " 97, 121, 108, 111, 97, 100, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic12varGeoNormalE[21] = {97, 116, 116, 11";
  s += "4, 105, 98, 117, 116, 101, 32, 71, 69, 79, 95, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal_seman";
  s += "tic9varNormalE[17] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _";
  s += "ZN21rti_internal_semantic11varTexCoordE[19] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 84, 69, 88, 67, 79, 79, 82";
  s += ", 68, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic17parMaterialAlbedoE[1];\n.global .align 1 .b8 _ZN21rti_intern";
  s += "al_semantic18parMaterialTextureE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation12sysTopObjectE[1];\n.global .ali";
  s += "gn 1 .b8 _ZN23rti_internal_annotation6theRayE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation23theIntersectionDis";
  s += "tanceE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation6thePrdE[1];\n.global .align 1 .b8 _ZN23rti_internal_annota";
  s += "tion12varGeoNormalE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation9varNormalE[1];\n.global .align 1 .b8 _ZN23rti";
  s += "_internal_annotation11varTexCoordE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation17parMaterialAlbedoE[1];\n.glob";
  s += "al .align 1 .b8 _ZN23rti_internal_annotation18parMaterialTextureE[1];\n.const .align 4 .b8 __cudart_i2opi_f[24] = {65, 1";
  s += "44, 67, 60, 153, 149, 98, 219, 192, 221, 52, 245, 209, 87, 39, 252, 41, 21, 68, 78, 110, 131, 249, 162};\n\n.visible .en";
  s += "try _Z6rayhitv(\n\n)\n{\n .local .align 4 .b8 __local_depot0[28];\n .reg .b64 %SP;\n .reg .b64 %SPL;\n .reg .pred %p<32>";
  s += ";\n .reg .f32 %f<198>;\n .reg .b32 %r<200>;\n .reg .b64 %rd<30>;\n\n\n mov.u64 %rd29, __local_depot0;\n cvta.local.u64 %";
  s += "SP, %rd29;\n ldu.global.f32 %f68, [varGeoNormal];\n mov.u64 %rd14, varGeoNormal;\n add.s64 %rd15, %rd14, 4;\n ldu.global";
  s += ".f32 %f69, [%rd15];\n add.s64 %rd16, %rd14, 8;\n ldu.global.f32 %f70, [%rd16];\n mov.u32 %r74, 7937;\n mov.f32 %f197, 0f";
  s += "00000000;\n call (%f64, %f65, %f66, %f67), _rt_transform_tuple, (%r74, %f68, %f69, %f70, %f197);\n mul.f32 %f80, %f65, %";
  s += "f65;\n fma.rn.f32 %f81, %f64, %f64, %f80;\n fma.rn.f32 %f82, %f66, %f66, %f81;\n sqrt.rn.f32 %f83, %f82;\n rcp.rn.f32 %f";
  s += "84, %f83;\n mul.f32 %f183, %f64, %f84;\n mul.f32 %f184, %f65, %f84;\n mul.f32 %f185, %f66, %f84;\n ld.global.f32 %f76, [";
  s += "varNormal];\n ld.global.f32 %f77, [varNormal+4];\n ld.global.f32 %f78, [varNormal+8];\n call (%f72, %f73, %f74, %f75), _";
  s += "rt_transform_tuple, (%r74, %f76, %f77, %f78, %f197);\n mul.f32 %f85, %f73, %f73;\n fma.rn.f32 %f86, %f72, %f72, %f85;\n ";
  s += "fma.rn.f32 %f87, %f74, %f74, %f86;\n sqrt.rn.f32 %f88, %f87;\n rcp.rn.f32 %f89, %f88;\n mul.f32 %f180, %f72, %f89;\n mul";
  s += ".f32 %f181, %f73, %f89;\n mul.f32 %f182, %f74, %f89;\n ld.global.f32 %f90, [theRay+12];\n ld.global.f32 %f91, [theInters";
  s += "ectionDistance];\n ld.global.f32 %f92, [theRay+16];\n ld.global.f32 %f93, [theRay+20];\n ld.global.f32 %f94, [theRay];\n";
  s += " ld.global.f32 %f95, [theRay+4];\n ld.global.f32 %f96, [theRay+8];\n fma.rn.f32 %f97, %f91, %f93, %f96;\n fma.rn.f32 %f9";
  s += "8, %f91, %f92, %f95;\n fma.rn.f32 %f99, %f91, %f90, %f94;\n st.global.v2.f32 [thePrd], {%f99, %f98};\n st.global.f32 [th";
  s += "ePrd+8], %f97;\n ld.global.f32 %f100, [thePrd+12];\n ld.global.v2.f32 {%f101, %f102}, [thePrd+16];\n mul.f32 %f104, %f18";
  s += "4, %f101;\n fma.rn.f32 %f105, %f183, %f100, %f104;\n fma.rn.f32 %f107, %f185, %f102, %f105;\n setp.ltu.f32 %p1, %f107, 0";
  s += "f00000000;\n selp.b32 %r75, 0, 16, %p1;\n ld.global.u32 %r76, [thePrd+48];\n or.b32 %r1, %r75, %r76;\n st.global.u32 [th";
  s += "ePrd+48], %r1;\n and.b32 %r77, %r1, 16;\n setp.ne.s32 %p2, %r77, 0;\n @%p2 bra BB0_2;\n\n neg.f32 %f183, %f183;\n neg.f3";
  s += "2 %f184, %f184;\n neg.f32 %f185, %f185;\n neg.f32 %f180, %f180;\n neg.f32 %f181, %f181;\n neg.f32 %f182, %f182;\n\nBB0_2";
  s += ":\n mov.u32 %r191, 0;\n st.global.u32 [thePrd+44], %r191;\n st.global.u32 [thePrd+40], %r191;\n st.global.u32 [thePrd+36";
  s += "], %r191;\n st.global.u32 [thePrd+60], %r191;\n st.global.u32 [thePrd+56], %r191;\n st.global.u32 [thePrd+52], %r191;\n ";
  s += "st.global.u32 [thePrd+64], %r191;\n ld.global.u32 %r79, [thePrd+68];\n mad.lo.s32 %r80, %r79, 1664525, 1013904223;\n and";
  s += ".b32 %r81, %r80, 16777215;\n cvt.rn.f32.u32 %f108, %r81;\n mul.f32 %f109, %f108, 0f33800000;\n mad.lo.s32 %r82, %r80, 16";
  s += "64525, 1013904223;\n st.global.u32 [thePrd+68], %r82;\n and.b32 %r83, %r82, 16777215;\n cvt.rn.f32.u32 %f110, %r83;\n mu";
  s += "l.f32 %f111, %f110, 0f33800000;\n mul.f32 %f19, %f109, 0f40C90FDB;\n sqrt.rn.f32 %f20, %f111;\n add.u64 %rd17, %SP, 0;\n";
  s += " cvta.to.local.u64 %rd1, %rd17;\n abs.f32 %f21, %f19;\n setp.neu.f32 %p3, %f21, 0f7F800000;\n mov.f32 %f192, %f19;\n @%p";
  s += "3 bra BB0_4;\n\n mov.f32 %f112, 0f00000000;\n mul.rn.f32 %f22, %f19, %f112;\n mov.f32 %f192, %f22;\n\nBB0_4:\n mov.f32 %";
  s += "f23, %f192;\n mul.f32 %f113, %f23, 0f3F22F983;\n cvt.rni.s32.f32 %r189, %f113;\n cvt.rn.f32.s32 %f114, %r189;\n neg.f32 ";
  s += "%f115, %f114;\n mov.f32 %f116, 0f3FC90FDA;\n fma.rn.f32 %f117, %f115, %f116, %f23;\n mov.f32 %f118, 0f33A22168;\n fma.rn";
  s += ".f32 %f119, %f115, %f118, %f117;\n mov.f32 %f120, 0f27C234C5;\n fma.rn.f32 %f186, %f115, %f120, %f119;\n abs.f32 %f121, ";
  s += "%f23;\n setp.leu.f32 %p4, %f121, 0f47CE4780;\n @%p4 bra BB0_14;\n\n add.s64 %rd2, %rd1, 24;\n mov.b32 %r3, %f23;\n shr.u";
  s += "32 %r4, %r3, 23;\n shl.b32 %r86, %r3, 8;\n or.b32 %r5, %r86, -2147483648;\n mov.u32 %r181, 0;\n mov.u64 %rd25, __cudart_";
  s += "i2opi_f;\n mov.u32 %r180, -6;\n mov.u64 %rd26, %rd1;\n\nBB0_6:\n .pragma \"nounroll\";\n mov.u64 %rd4, %rd26;\n ld.const";
  s += ".u32 %r89, [%rd25];\n {\n mad.lo.cc.u32 %r87, %r89, %r5, %r181;\n madc.hi.u32 %r181, %r89, %r5, 0;\n }\n st.local.u32 [%";
  s += "rd4], %r87;\n add.s64 %rd5, %rd4, 4;\n add.s64 %rd25, %rd25, 4;\n add.s32 %r180, %r180, 1;\n setp.ne.s32 %p5, %r180, 0;";
  s += "\n mov.u64 %rd26, %rd5;\n @%p5 bra BB0_6;\n\n and.b32 %r92, %r4, 255;\n add.s32 %r93, %r92, -128;\n shr.u32 %r94, %r93, ";
  s += "5;\n and.b32 %r10, %r3, -2147483648;\n st.local.u32 [%rd2], %r181;\n mov.u32 %r95, 6;\n sub.s32 %r96, %r95, %r94;\n mul.";
  s += "wide.s32 %rd19, %r96, 4;\n add.s64 %rd7, %rd1, %rd19;\n ld.local.u32 %r182, [%rd7];\n ld.local.u32 %r183, [%rd7+-4];\n a";
  s += "nd.b32 %r13, %r4, 31;\n setp.eq.s32 %p6, %r13, 0;\n @%p6 bra BB0_9;\n\n mov.u32 %r97, 32;\n sub.s32 %r98, %r97, %r13;\n ";
  s += "shr.u32 %r99, %r183, %r98;\n shl.b32 %r100, %r182, %r13;\n add.s32 %r182, %r99, %r100;\n ld.local.u32 %r101, [%rd7+-8];";
  s += "\n shr.u32 %r102, %r101, %r98;\n shl.b32 %r103, %r183, %r13;\n add.s32 %r183, %r102, %r103;\n\nBB0_9:\n shr.u32 %r104, %";
  s += "r183, 30;\n shl.b32 %r105, %r182, 2;\n add.s32 %r184, %r104, %r105;\n shl.b32 %r19, %r183, 2;\n shr.u32 %r106, %r184, 31";
  s += ";\n shr.u32 %r107, %r182, 30;\n add.s32 %r20, %r106, %r107;\n setp.eq.s32 %p7, %r106, 0;\n mov.u32 %r185, %r10;\n mov.u3";
  s += "2 %r186, %r19;\n @%p7 bra BB0_11;\n\n not.b32 %r108, %r184;\n neg.s32 %r21, %r19;\n setp.eq.s32 %p8, %r19, 0;\n selp.u32";
  s += " %r109, 1, 0, %p8;\n add.s32 %r184, %r109, %r108;\n xor.b32 %r23, %r10, -2147483648;\n mov.u32 %r185, %r23;\n mov.u32 %r";
  s += "186, %r21;\n\nBB0_11:\n mov.u32 %r25, %r185;\n neg.s32 %r110, %r20;\n setp.eq.s32 %p9, %r10, 0;\n selp.b32 %r189, %r20, ";
  s += "%r110, %p9;\n clz.b32 %r188, %r184;\n setp.eq.s32 %p10, %r188, 0;\n shl.b32 %r111, %r184, %r188;\n mov.u32 %r112, 32;\n ";
  s += "sub.s32 %r113, %r112, %r188;\n shr.u32 %r114, %r186, %r113;\n add.s32 %r115, %r114, %r111;\n selp.b32 %r29, %r184, %r115";
  s += ", %p10;\n mov.u32 %r116, -921707870;\n mul.hi.u32 %r187, %r29, %r116;\n setp.lt.s32 %p11, %r187, 1;\n @%p11 bra BB0_13;";
  s += "\n\n mul.lo.s32 %r117, %r29, -921707870;\n shr.u32 %r118, %r117, 31;\n shl.b32 %r119, %r187, 1;\n add.s32 %r187, %r118, ";
  s += "%r119;\n add.s32 %r188, %r188, 1;\n\nBB0_13:\n mov.u32 %r120, 126;\n sub.s32 %r121, %r120, %r188;\n shl.b32 %r122, %r121";
  s += ", 23;\n add.s32 %r123, %r187, 1;\n shr.u32 %r124, %r123, 7;\n add.s32 %r125, %r124, 1;\n shr.u32 %r126, %r125, 1;\n add.";
  s += "s32 %r127, %r126, %r122;\n or.b32 %r128, %r127, %r25;\n mov.b32 %f186, %r128;\n\nBB0_14:\n mul.rn.f32 %f27, %f186, %f186";
  s += ";\n add.s32 %r36, %r189, 1;\n and.b32 %r37, %r36, 1;\n setp.eq.s32 %p12, %r37, 0;\n @%p12 bra BB0_16;\n\n mov.f32 %f122,";
  s += " 0fBAB6061A;\n mov.f32 %f123, 0f37CCF5CE;\n fma.rn.f32 %f187, %f123, %f27, %f122;\n bra.uni BB0_17;\n\nBB0_16:\n mov.f32";
  s += " %f124, 0f3C08839E;\n mov.f32 %f125, 0fB94CA1F9;\n fma.rn.f32 %f187, %f125, %f27, %f124;\n\nBB0_17:\n @%p12 bra BB0_19;";
  s += "\n\n mov.f32 %f126, 0f3D2AAAA5;\n fma.rn.f32 %f127, %f187, %f27, %f126;\n mov.f32 %f128, 0fBF000000;\n fma.rn.f32 %f188,";
  s += " %f127, %f27, %f128;\n bra.uni BB0_20;\n\nBB0_19:\n mov.f32 %f129, 0fBE2AAAA3;\n fma.rn.f32 %f130, %f187, %f27, %f129;\n";
  s += " mov.f32 %f131, 0f00000000;\n fma.rn.f32 %f188, %f130, %f27, %f131;\n\nBB0_20:\n fma.rn.f32 %f189, %f188, %f186, %f186;";
  s += "\n @%p12 bra BB0_22;\n\n mov.f32 %f132, 0f3F800000;\n fma.rn.f32 %f189, %f188, %f27, %f132;\n\nBB0_22:\n and.b32 %r129, ";
  s += "%r36, 2;\n setp.eq.s32 %p15, %r129, 0;\n @%p15 bra BB0_24;\n\n mov.f32 %f134, 0fBF800000;\n fma.rn.f32 %f189, %f189, %f1";
  s += "34, %f197;\n\nBB0_24:\n mul.f32 %f39, %f20, %f189;\n st.global.f32 [thePrd+24], %f39;\n mov.f32 %f191, %f19;\n @%p3 bra ";
  s += "BB0_26;\n\n mov.f32 %f135, 0f00000000;\n mul.rn.f32 %f191, %f19, %f135;\n\nBB0_26:\n mul.f32 %f136, %f191, 0f3F22F983;\n";
  s += " cvt.rni.s32.f32 %r199, %f136;\n cvt.rn.f32.s32 %f137, %r199;\n neg.f32 %f138, %f137;\n fma.rn.f32 %f140, %f138, %f116, ";
  s += "%f191;\n fma.rn.f32 %f142, %f138, %f118, %f140;\n fma.rn.f32 %f193, %f138, %f120, %f142;\n abs.f32 %f144, %f191;\n setp.";
  s += "leu.f32 %p17, %f144, 0f47CE4780;\n @%p17 bra BB0_36;\n\n mov.b32 %r39, %f191;\n shr.u32 %r40, %r39, 23;\n shl.b32 %r132,";
  s += " %r39, 8;\n or.b32 %r41, %r132, -2147483648;\n cvta.to.local.u64 %rd28, %rd17;\n mov.u64 %rd27, __cudart_i2opi_f;\n mov.";
  s += "u32 %r190, -6;\n\nBB0_28:\n .pragma \"nounroll\";\n ld.const.u32 %r135, [%rd27];\n {\n mad.lo.cc.u32 %r133, %r135, %r41,";
  s += " %r191;\n madc.hi.u32 %r191, %r135, %r41, 0;\n }\n st.local.u32 [%rd28], %r133;\n add.s64 %rd28, %rd28, 4;\n add.s64 %rd";
  s += "27, %rd27, 4;\n add.s32 %r190, %r190, 1;\n setp.ne.s32 %p18, %r190, 0;\n @%p18 bra BB0_28;\n\n and.b32 %r138, %r40, 255;";
  s += "\n add.s32 %r139, %r138, -128;\n shr.u32 %r140, %r139, 5;\n and.b32 %r46, %r39, -2147483648;\n cvta.to.local.u64 %rd23, ";
  s += "%rd17;\n st.local.u32 [%rd23+24], %r191;\n mov.u32 %r141, 6;\n sub.s32 %r142, %r141, %r140;\n mul.wide.s32 %rd24, %r142,";
  s += " 4;\n add.s64 %rd13, %rd23, %rd24;\n ld.local.u32 %r192, [%rd13];\n ld.local.u32 %r193, [%rd13+-4];\n and.b32 %r49, %r40";
  s += ", 31;\n setp.eq.s32 %p19, %r49, 0;\n @%p19 bra BB0_31;\n\n mov.u32 %r143, 32;\n sub.s32 %r144, %r143, %r49;\n shr.u32 %r";
  s += "145, %r193, %r144;\n shl.b32 %r146, %r192, %r49;\n add.s32 %r192, %r145, %r146;\n ld.local.u32 %r147, [%rd13+-8];\n shr.";
  s += "u32 %r148, %r147, %r144;\n shl.b32 %r149, %r193, %r49;\n add.s32 %r193, %r148, %r149;\n\nBB0_31:\n shr.u32 %r150, %r193,";
  s += " 30;\n shl.b32 %r151, %r192, 2;\n add.s32 %r194, %r150, %r151;\n shl.b32 %r55, %r193, 2;\n shr.u32 %r152, %r194, 31;\n s";
  s += "hr.u32 %r153, %r192, 30;\n add.s32 %r56, %r152, %r153;\n setp.eq.s32 %p20, %r152, 0;\n mov.u32 %r195, %r46;\n mov.u32 %r";
  s += "196, %r55;\n @%p20 bra BB0_33;\n\n not.b32 %r154, %r194;\n neg.s32 %r57, %r55;\n setp.eq.s32 %p21, %r55, 0;\n selp.u32 %";
  s += "r155, 1, 0, %p21;\n add.s32 %r194, %r155, %r154;\n xor.b32 %r59, %r46, -2147483648;\n mov.u32 %r195, %r59;\n mov.u32 %r1";
  s += "96, %r57;\n\nBB0_33:\n mov.u32 %r61, %r195;\n neg.s32 %r156, %r56;\n setp.eq.s32 %p22, %r46, 0;\n selp.b32 %r199, %r56, ";
  s += "%r156, %p22;\n clz.b32 %r198, %r194;\n setp.eq.s32 %p23, %r198, 0;\n shl.b32 %r157, %r194, %r198;\n mov.u32 %r158, 32;\n";
  s += " sub.s32 %r159, %r158, %r198;\n shr.u32 %r160, %r196, %r159;\n add.s32 %r161, %r160, %r157;\n selp.b32 %r65, %r194, %r16";
  s += "1, %p23;\n mov.u32 %r162, -921707870;\n mul.hi.u32 %r197, %r65, %r162;\n setp.lt.s32 %p24, %r197, 1;\n @%p24 bra BB0_35;";
  s += "\n\n mul.lo.s32 %r163, %r65, -921707870;\n shr.u32 %r164, %r163, 31;\n shl.b32 %r165, %r197, 1;\n add.s32 %r197, %r164, ";
  s += "%r165;\n add.s32 %r198, %r198, 1;\n\nBB0_35:\n mov.u32 %r166, 126;\n sub.s32 %r167, %r166, %r198;\n shl.b32 %r168, %r167";
  s += ", 23;\n add.s32 %r169, %r197, 1;\n shr.u32 %r170, %r169, 7;\n add.s32 %r171, %r170, 1;\n shr.u32 %r172, %r171, 1;\n add.";
  s += "s32 %r173, %r172, %r168;\n or.b32 %r174, %r173, %r61;\n mov.b32 %f193, %r174;\n\nBB0_36:\n mul.rn.f32 %f45, %f193, %f193";
  s += ";\n and.b32 %r72, %r199, 1;\n setp.eq.s32 %p25, %r72, 0;\n @%p25 bra BB0_38;\n\n mov.f32 %f145, 0fBAB6061A;\n mov.f32 %f";
  s += "146, 0f37CCF5CE;\n fma.rn.f32 %f194, %f146, %f45, %f145;\n bra.uni BB0_39;\n\nBB0_38:\n mov.f32 %f147, 0f3C08839E;\n mov";
  s += ".f32 %f148, 0fB94CA1F9;\n fma.rn.f32 %f194, %f148, %f45, %f147;\n\nBB0_39:\n @%p25 bra BB0_41;\n\n mov.f32 %f149, 0f3D2A";
  s += "AAA5;\n fma.rn.f32 %f150, %f194, %f45, %f149;\n mov.f32 %f151, 0fBF000000;\n fma.rn.f32 %f195, %f150, %f45, %f151;\n bra";
  s += ".uni BB0_42;\n\nBB0_41:\n mov.f32 %f152, 0fBE2AAAA3;\n fma.rn.f32 %f153, %f194, %f45, %f152;\n mov.f32 %f154, 0f00000000";
  s += ";\n fma.rn.f32 %f195, %f153, %f45, %f154;\n\nBB0_42:\n fma.rn.f32 %f196, %f195, %f193, %f193;\n @%p25 bra BB0_44;\n\n mo";
  s += "v.f32 %f155, 0f3F800000;\n fma.rn.f32 %f196, %f195, %f45, %f155;\n\nBB0_44:\n and.b32 %r175, %r199, 2;\n setp.eq.s32 %p2";
  s += "8, %r175, 0;\n @%p28 bra BB0_46;\n\n mov.f32 %f157, 0fBF800000;\n fma.rn.f32 %f196, %f196, %f157, %f197;\n\nBB0_46:\n mu";
  s += "l.f32 %f57, %f20, %f196;\n st.global.f32 [thePrd+28], %f57;\n mul.f32 %f159, %f39, %f39;\n mov.f32 %f160, 0f3F800000;\n ";
  s += "sub.f32 %f161, %f160, %f159;\n mul.f32 %f162, %f57, %f57;\n sub.f32 %f58, %f161, %f162;\n st.global.f32 [thePrd+32], %f5";
  s += "8;\n setp.leu.f32 %p29, %f58, 0f00000000;\n @%p29 bra BB0_48;\n\n sqrt.rn.f32 %f197, %f58;\n\nBB0_48:\n mul.f32 %f163, %";
  s += "f197, 0f3EA2F983;\n st.global.f32 [thePrd+64], %f163;\n mov.b32 %r176, %f182;\n and.b32 %r177, %r176, -2147483648;\n or.";
  s += "b32 %r178, %r177, 1065353216;\n mov.b32 %f164, %r178;\n mul.f32 %f165, %f164, %f197;\n add.f32 %f166, %f182, %f164;\n mu";
  s += "l.f32 %f167, %f181, %f57;\n fma.rn.f32 %f168, %f180, %f39, %f167;\n fma.rn.f32 %f169, %f166, %f165, %f168;\n abs.f32 %f1";
  s += "70, %f182;\n add.f32 %f171, %f170, 0f3F800000;\n div.rn.f32 %f172, %f169, %f171;\n mul.f32 %f173, %f180, %f172;\n mul.f3";
  s += "2 %f174, %f181, %f172;\n mul.f32 %f175, %f166, %f172;\n sub.f32 %f61, %f173, %f39;\n sub.f32 %f62, %f174, %f57;\n sub.f3";
  s += "2 %f63, %f175, %f165;\n st.global.v2.f32 [thePrd+24], {%f61, %f62};\n st.global.f32 [thePrd+32], %f63;\n setp.le.f32 %p3";
  s += "0, %f163, 0f00000000;\n @%p30 bra BB0_50;\n\n mul.f32 %f176, %f184, %f62;\n fma.rn.f32 %f177, %f183, %f61, %f176;\n fma.";
  s += "rn.f32 %f178, %f185, %f63, %f177;\n setp.gtu.f32 %p31, %f178, 0f00000000;\n @%p31 bra BB0_51;\n bra.uni BB0_50;\n\nBB0_5";
  s += "1:\n ld.global.f32 %f179, [parMaterialAlbedo];\n st.global.f32 [thePrd+52], %f179;\n st.global.v2.f32 [thePrd+56], {%f17";
  s += "9, %f179};\n bra.uni BB0_52;\n\nBB0_50:\n or.b32 %r179, %r1, -2147483648;\n st.global.u32 [thePrd+48], %r179;\n\nBB0_52:";
  s += "\n ret;\n}";
  return s;
}

inline std::string ptx_program_rayintersection(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 1 .b8 attributesBuffer[1];\n.global .align 1 .b8 indice";
  s += "sBuffer[1];\n.global .align 8 .b8 varGeoNormal[12];\n.global .align 8 .b8 varNormal[12];\n.global .align 8 .b8 varTexCoo";
  s += "rd[12];\n.global .align 4 .b8 theRay[36];\n.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;\n.gl";
  s += "obal .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;\n.global .align 8 .u64 _ZN21rti_internal_regis";
  s += "ter24reg_exception_64_detail1E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;\n.global .";
  s += "align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;\n.global .align 8 .u64 _ZN21rti_internal_register24r";
  s += "eg_exception_64_detail4E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;\n.global .align ";
  s += "8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exc";
  s += "eption_64_detail7E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;\n.global .align 8 .u64";
  s += " _ZN21rti_internal_register24reg_exception_64_detail9E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception";
  s += "_detail0E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;\n.global .align 4 .u32 _ZN21rti_in";
  s += "ternal_register21reg_exception_detail2E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;\n.gl";
  s += "obal .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;\n.global .align 4 .u32 _ZN21rti_internal_register";
  s += "21reg_exception_detail5E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;\n.global .align 4 .";
  s += "u32 _ZN21rti_internal_register21reg_exception_detail7E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception";
  s += "_detail8E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;\n.global .align 4 .u32 _ZN21rti_in";
  s += "ternal_register14reg_rayIndex_xE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;\n.global .align 4 ";
  s += ".u32 _ZN21rti_internal_register14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rti_internal_typeinfo12varGeoNormalE[8] = {";
  s += "82, 97, 121, 0, 12, 0, 0, 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo9varNormalE[8] = {82, 97, 121, 0, 12, 0, 0";
  s += ", 0};\n.global .align 4 .b8 _ZN21rti_internal_typeinfo11varTexCoordE[8] = {82, 97, 121, 0, 12, 0, 0, 0};\n.global .align";
  s += " 4 .b8 _ZN21rti_internal_typeinfo6theRayE[8] = {82, 97, 121, 0, 36, 0, 0, 0};\n.global .align 1 .b8 _ZN21rti_internal_ty";
  s += "pename12varGeoNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .align 1 .b8 _ZN2";
  s += "1rti_internal_typename9varNormalE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};\n.global .alig";
  s += "n 1 .b8 _ZN21rti_internal_typename11varTexCoordE[14] = {111, 112, 116, 105, 120, 58, 58, 102, 108, 111, 97, 116, 51, 0};";
  s += "\n.global .align 1 .b8 _ZN21rti_internal_typename6theRayE[11] = {111, 112, 116, 105, 120, 58, 58, 82, 97, 121, 0};\n.glo";
  s += "bal .align 4 .u32 _ZN21rti_internal_typeenum12varGeoNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum9va";
  s += "rNormalE = 4919;\n.global .align 4 .u32 _ZN21rti_internal_typeenum11varTexCoordE = 4919;\n.global .align 4 .u32 _ZN21rti";
  s += "_internal_typeenum6theRayE = 4919;\n.global .align 1 .b8 _ZN21rti_internal_semantic12varGeoNormalE[21] = {97, 116, 116, ";
  s += "114, 105, 98, 117, 116, 101, 32, 71, 69, 79, 95, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8 _ZN21rti_internal_sem";
  s += "antic9varNormalE[17] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 78, 79, 82, 77, 65, 76, 0};\n.global .align 1 .b8";
  s += " _ZN21rti_internal_semantic11varTexCoordE[19] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 84, 69, 88, 67, 79, 79, ";
  s += "82, 68, 0};\n.global .align 1 .b8 _ZN21rti_internal_semantic6theRayE[13] = {114, 116, 67, 117, 114, 114, 101, 110, 116, ";
  s += "82, 97, 121, 0};\n.global .align 1 .b8 _ZN23rti_internal_annotation12varGeoNormalE[1];\n.global .align 1 .b8 _ZN23rti_in";
  s += "ternal_annotation9varNormalE[1];\n.global .align 1 .b8 _ZN23rti_internal_annotation11varTexCoordE[1];\n.global .align 1 ";
  s += ".b8 _ZN23rti_internal_annotation6theRayE[1];\n\n.visible .entry _Z15rayintersectioni(\n .param .u32 _Z15rayintersectioni";
  s += "_param_0\n)\n{\n .reg .pred %p<11>;\n .reg .f32 %f<84>;\n .reg .b32 %r<12>;\n .reg .b64 %rd<30>;\n\n\n ld.param.s32 %rd6";
  s += ", [_Z15rayintersectioni_param_0];\n mov.u64 %rd28, indicesBuffer;\n cvta.global.u64 %rd5, %rd28;\n mov.u32 %r7, 1;\n mov";
  s += ".u32 %r2, 12;\n mov.u64 %rd27, 0;\n call (%rd4), _rt_buffer_get_64, (%rd5, %r7, %r2, %rd6, %rd27, %rd27, %rd27);\n ld.u3";
  s += "2 %rd12, [%rd4];\n mov.u64 %rd29, attributesBuffer;\n cvta.global.u64 %rd11, %rd29;\n ld.u32 %rd18, [%rd4+4];\n ld.u32 %";
  s += "rd24, [%rd4+8];\n mov.u32 %r8, 24;\n call (%rd10), _rt_buffer_get_64, (%rd11, %r7, %r8, %rd12, %rd27, %rd27, %rd27);\n c";
  s += "all (%rd16), _rt_buffer_get_64, (%rd11, %r7, %r8, %rd18, %rd27, %rd27, %rd27);\n call (%rd22), _rt_buffer_get_64, (%rd11";
  s += ", %r7, %r8, %rd24, %rd27, %rd27, %rd27);\n ld.f32 %f7, [%rd16+8];\n ld.f32 %f8, [%rd16+4];\n ld.f32 %f9, [%rd16];\n ld.f";
  s += "32 %f10, [%rd10+8];\n ld.f32 %f11, [%rd10+4];\n ld.f32 %f12, [%rd10];\n sub.f32 %f13, %f9, %f12;\n sub.f32 %f14, %f8, %f";
  s += "11;\n sub.f32 %f15, %f7, %f10;\n ld.f32 %f16, [%rd22+8];\n ld.f32 %f17, [%rd22+4];\n ld.f32 %f18, [%rd22];\n sub.f32 %f1";
  s += "9, %f12, %f18;\n sub.f32 %f20, %f11, %f17;\n sub.f32 %f21, %f10, %f16;\n mul.f32 %f22, %f15, %f20;\n mul.f32 %f23, %f14,";
  s += " %f21;\n sub.f32 %f1, %f22, %f23;\n mul.f32 %f24, %f13, %f21;\n mul.f32 %f25, %f15, %f19;\n sub.f32 %f2, %f24, %f25;\n m";
  s += "ul.f32 %f26, %f14, %f19;\n mul.f32 %f27, %f13, %f20;\n sub.f32 %f3, %f26, %f27;\n ld.global.f32 %f28, [theRay+12];\n ld.";
  s += "global.f32 %f29, [theRay+16];\n mul.f32 %f30, %f29, %f2;\n fma.rn.f32 %f31, %f28, %f1, %f30;\n ld.global.f32 %f32, [theR";
  s += "ay+20];\n fma.rn.f32 %f33, %f32, %f3, %f31;\n rcp.rn.f32 %f34, %f33;\n ld.global.f32 %f35, [theRay];\n sub.f32 %f36, %f1";
  s += "2, %f35;\n ld.global.f32 %f37, [theRay+4];\n sub.f32 %f38, %f11, %f37;\n ld.global.f32 %f39, [theRay+8];\n sub.f32 %f40,";
  s += " %f10, %f39;\n mul.f32 %f41, %f34, %f36;\n mul.f32 %f42, %f34, %f38;\n mul.f32 %f43, %f34, %f40;\n mul.f32 %f44, %f29, %";
  s += "f43;\n mul.f32 %f45, %f42, %f32;\n sub.f32 %f46, %f44, %f45;\n mul.f32 %f47, %f41, %f32;\n mul.f32 %f48, %f43, %f28;\n s";
  s += "ub.f32 %f49, %f47, %f48;\n mul.f32 %f50, %f42, %f28;\n mul.f32 %f51, %f41, %f29;\n sub.f32 %f52, %f50, %f51;\n mul.f32 %";
  s += "f53, %f20, %f49;\n fma.rn.f32 %f54, %f19, %f46, %f53;\n fma.rn.f32 %f4, %f21, %f52, %f54;\n mul.f32 %f55, %f14, %f49;\n ";
  s += "fma.rn.f32 %f56, %f13, %f46, %f55;\n fma.rn.f32 %f5, %f15, %f52, %f56;\n mul.f32 %f57, %f2, %f42;\n fma.rn.f32 %f58, %f1";
  s += ", %f41, %f57;\n fma.rn.f32 %f6, %f3, %f43, %f58;\n ld.global.f32 %f59, [theRay+32];\n setp.lt.f32 %p1, %f6, %f59;\n ld.g";
  s += "lobal.f32 %f60, [theRay+28];\n setp.gt.f32 %p2, %f6, %f60;\n and.pred %p3, %p1, %p2;\n setp.ge.f32 %p4, %f4, 0f00000000;";
  s += "\n and.pred %p5, %p3, %p4;\n setp.ge.f32 %p6, %f5, 0f00000000;\n and.pred %p7, %p5, %p6;\n add.f32 %f61, %f4, %f5;\n set";
  s += "p.le.f32 %p8, %f61, 0f3F800000;\n and.pred %p9, %p7, %p8;\n @!%p9 bra BB0_3;\n bra.uni BB0_1;\n\nBB0_1:\n call (%r9), _r";
  s += "t_potential_intersection, (%f6);\n setp.eq.s32 %p10, %r9, 0;\n @%p10 bra BB0_3;\n\n mov.f32 %f63, 0f3F800000;\n sub.f32 ";
  s += "%f64, %f63, %f4;\n sub.f32 %f65, %f64, %f5;\n st.global.v2.f32 [varGeoNormal], {%f1, %f2};\n st.global.f32 [varGeoNormal";
  s += "+8], %f3;\n st.global.v2.f32 [varNormal], {%f1, %f2};\n st.global.f32 [varNormal+8], %f3;\n ld.f32 %f66, [%rd10+12];\n l";
  s += "d.f32 %f67, [%rd10+16];\n ld.f32 %f68, [%rd10+20];\n ld.f32 %f69, [%rd16+12];\n mul.f32 %f70, %f4, %f69;\n ld.f32 %f71, ";
  s += "[%rd16+16];\n mul.f32 %f72, %f4, %f71;\n ld.f32 %f73, [%rd16+20];\n mul.f32 %f74, %f4, %f73;\n fma.rn.f32 %f75, %f65, %f";
  s += "66, %f70;\n fma.rn.f32 %f76, %f65, %f67, %f72;\n fma.rn.f32 %f77, %f65, %f68, %f74;\n ld.f32 %f78, [%rd22+12];\n ld.f32 ";
  s += "%f79, [%rd22+16];\n ld.f32 %f80, [%rd22+20];\n fma.rn.f32 %f81, %f5, %f80, %f77;\n fma.rn.f32 %f82, %f5, %f79, %f76;\n f";
  s += "ma.rn.f32 %f83, %f5, %f78, %f75;\n st.global.v2.f32 [varTexCoord], {%f83, %f82};\n st.global.f32 [varTexCoord+8], %f81;";
  s += "\n mov.u32 %r11, 0;\n call (%r10), _rt_report_intersection, (%r11);\n \nBB0_3:\n ret;\n}";
  return s;
}

inline std::string ptx_program_raymiss(){ 
  std::string s;
  s += ".version 5.0\n.target sm_20\n.address_size 64\n\n .global .align 4 .b8 thePrd[72];\n.global .align 8 .u64 _ZN21rti_inter";
  s += "nal_register20reg_bitness_detectorE;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;\n.glo";
  s += "bal .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail1E;\n.global .align 8 .u64 _ZN21rti_internal_regist";
  s += "er24reg_exception_64_detail2E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;\n.global .a";
  s += "lign 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail4E;\n.global .align 8 .u64 _ZN21rti_internal_register24re";
  s += "g_exception_64_detail5E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;\n.global .align 8";
  s += " .u64 _ZN21rti_internal_register24reg_exception_64_detail7E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exce";
  s += "ption_64_detail8E;\n.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail9E;\n.global .align 4 .u32 ";
  s += "_ZN21rti_internal_register21reg_exception_detail0E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_det";
  s += "ail1E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail2E;\n.global .align 4 .u32 _ZN21rti_intern";
  s += "al_register21reg_exception_detail3E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;\n.global";
  s += " .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail5E;\n.global .align 4 .u32 _ZN21rti_internal_register21re";
  s += "g_exception_detail6E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;\n.global .align 4 .u32 ";
  s += "_ZN21rti_internal_register21reg_exception_detail8E;\n.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_det";
  s += "ail9E;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_xE;\n.global .align 4 .u32 _ZN21rti_internal_regi";
  s += "ster14reg_rayIndex_yE;\n.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;\n.global .align 4 .b8 _ZN21rt";
  s += "i_internal_typeinfo6thePrdE[8] = {82, 97, 121, 0, 72, 0, 0, 0};\n.global .align 1 .b8 _ZN21rti_internal_typename6thePrdE";
  s += "[11] = {80, 101, 114, 82, 97, 121, 68, 97, 116, 97, 0};\n.global .align 4 .u32 _ZN21rti_internal_typeenum6thePrdE = 4919";
  s += ";\n.global .align 1 .b8 _ZN21rti_internal_semantic6thePrdE[10] = {114, 116, 80, 97, 121, 108, 111, 97, 100, 0};\n.global";
  s += " .align 1 .b8 _ZN23rti_internal_annotation6thePrdE[1];\n\n.visible .entry _Z7raymissv(\n\n)\n{\n .reg .b32 %r<4>;\n .reg";
  s += " .b64 %rd<3>;\n\n\n mov.u32 %r1, 1065353216;\n st.global.u32 [thePrd+44], %r1;\n st.global.u32 [thePrd+40], %r1;\n st.gl";
  s += "obal.u32 [thePrd+36], %r1;\n mov.u64 %rd1, thePrd;\n add.s64 %rd2, %rd1, 48;\n ldu.global.u32 %r2, [%rd2];\n or.b32 %r3,";
  s += " %r2, -2147483648;\n st.global.u32 [thePrd+48], %r3;\n ret;\n}";
  return s;
}

